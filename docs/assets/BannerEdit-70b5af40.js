import{_ as F,p as I,u as N,r as m,s as S,l as D,o as s,c as e,a as n,m as w,b as E,d as c,f as _,n as d,t as i,j as r,v as L,F as P}from"./index-2084911f.js";import{F as R,N as T,_ as z}from"./sidebar-d4d14e1c.js";const A={components:{Footer:R,Navbar:T,Sidebar:z},setup(){const g=I();N().params.id;const v=m({title:"",subtitle_1:"",subtitle_2:"",content:"",action_link_href:"",action_link_text:"",action_link2_href:"",action_link2_text:"",status:"active",image:null,sort:null}),t=m({}),u=m(!1),f=m(!1),k=m(""),b=m(null),y=async()=>{try{const l={title:"夏季健康特惠活動",subtitle_1:"早鳥優惠",subtitle_2:"限時折扣",content:"立即註冊即可享受專業健康諮詢服務",status:"active",img_url:"https://picsum.photos/800/400",action_link_href:"#",action_link_text:"立即報名",sort:1};v.value=l,l.img_url&&(b.value=l.img_url)}catch(l){console.error("Error fetching banner data:",l),h("獲取橫幅數據失敗，請稍後再試。")}},a=async()=>{u.value=!0;try{t.value={},await new Promise(l=>setTimeout(l,1e3)),j("橫幅更新成功"),g.push("/layout/banner")}catch(l){console.error("Error updating banner:",l),h("橫幅更新失敗："+(l.message||"未知錯誤"))}finally{u.value=!1}},h=l=>{k.value=l,f.value=!0},j=l=>{k.value=l,f.value=!0},B=()=>{f.value=!1},V=()=>{g.push("/layout/banner")},p=l=>{const x=l.target.files[0];if(x){v.value.image=x;const M=new FileReader;M.onload=U=>{b.value=U.target.result},M.readAsDataURL(x)}},C=()=>{v.value.image=null,b.value=null};return S(()=>{y()}),{bannerData:v,updateBanner:a,goBack:V,errors:t,isLoading:u,showModal:f,modalMessage:k,closeModal:B,handleImageChange:p,imagePreview:b,clearImage:C}}},q={class:"main-wrapper"},G={class:"page-wrapper"},H={class:"page-content"},J={class:"row"},K={class:"col-12"},O={class:"card"},Q={class:"card-body"},W={class:"row"},X={class:"col-md-6"},Y={class:"mb-3"},Z={key:0,class:"invalid-feedback"},$={class:"mb-3"},tt={key:0,class:"invalid-feedback"},ot={class:"mb-3"},nt={key:0,class:"invalid-feedback"},at={class:"mb-3"},lt={key:0,class:"invalid-feedback"},st={class:"col-md-6"},et={class:"mb-3"},it={key:0,class:"invalid-feedback"},rt={class:"mb-3"},dt={key:0,class:"invalid-feedback"},ct={class:"mb-3"},_t={key:0,class:"invalid-feedback"},bt={class:"mb-3"},mt={key:0,class:"invalid-feedback"},vt={class:"col-md-6"},ft={class:"mb-3"},kt={key:0,class:"invalid-feedback"},ut={class:"mb-3"},gt={key:0,class:"invalid-feedback"},yt={key:1,class:"mt-2"},xt=["src"],Dt={class:"mb-3"},wt={key:0,class:"invalid-feedback"},ht={class:"mt-4"},Mt=["disabled"],jt=["disabled"],Bt={class:"modal-dialog"},Vt={class:"modal-content"},pt={class:"modal-header"},Ct={class:"modal-body"},Ut={class:"modal-footer"};function Ft(g,o,v,t,u,f){const k=D("Sidebar"),b=D("Navbar"),y=D("Footer");return s(),e(P,null,[n("div",q,[w(k),n("div",G,[w(b),n("div",H,[n("div",J,[n("div",K,[n("div",O,[n("div",Q,[o[31]||(o[31]=n("h4",{class:"card-title mb-4"},"編輯橫幅",-1)),n("form",{onSubmit:o[13]||(o[13]=E((...a)=>t.updateBanner&&t.updateBanner(...a),["prevent"])),enctype:"multipart/form-data",class:"w-100"},[n("div",W,[n("div",X,[n("div",Y,[o[17]||(o[17]=n("label",{for:"title",class:"form-label"},"標題",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.title}]),id:"title","onUpdate:modelValue":o[0]||(o[0]=a=>t.bannerData.title=a)},null,2),[[_,t.bannerData.title]]),t.errors.title?(s(),e("div",Z,i(t.errors.title.join(", ")),1)):r("",!0)]),n("div",$,[o[18]||(o[18]=n("label",{for:"subtitle_1",class:"form-label"},"副標題1",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.subtitle_1}]),id:"subtitle_1","onUpdate:modelValue":o[1]||(o[1]=a=>t.bannerData.subtitle_1=a)},null,2),[[_,t.bannerData.subtitle_1]]),t.errors.subtitle_1?(s(),e("div",tt,i(t.errors.subtitle_1.join(", ")),1)):r("",!0)]),n("div",ot,[o[19]||(o[19]=n("label",{for:"subtitle_2",class:"form-label"},"副標題2",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.subtitle_2}]),id:"subtitle_2","onUpdate:modelValue":o[2]||(o[2]=a=>t.bannerData.subtitle_2=a)},null,2),[[_,t.bannerData.subtitle_2]]),t.errors.subtitle_2?(s(),e("div",nt,i(t.errors.subtitle_2.join(", ")),1)):r("",!0)]),n("div",at,[o[20]||(o[20]=n("label",{for:"content",class:"form-label"},"內容",-1)),c(n("textarea",{class:d(["form-control",{"is-invalid":t.errors.content}]),id:"content","onUpdate:modelValue":o[3]||(o[3]=a=>t.bannerData.content=a)},null,2),[[_,t.bannerData.content]]),t.errors.content?(s(),e("div",lt,i(t.errors.content.join(", ")),1)):r("",!0)])]),n("div",st,[n("div",et,[o[21]||(o[21]=n("label",{for:"action_link_href",class:"form-label"},"行動連結網址",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.action_link_href}]),id:"action_link_href","onUpdate:modelValue":o[4]||(o[4]=a=>t.bannerData.action_link_href=a)},null,2),[[_,t.bannerData.action_link_href]]),t.errors.action_link_href?(s(),e("div",it,i(t.errors.action_link_href.join(", ")),1)):r("",!0)]),n("div",rt,[o[22]||(o[22]=n("label",{for:"action_link_text",class:"form-label"},"行動連結文字",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.action_link_text}]),id:"action_link_text","onUpdate:modelValue":o[5]||(o[5]=a=>t.bannerData.action_link_text=a)},null,2),[[_,t.bannerData.action_link_text]]),t.errors.action_link_text?(s(),e("div",dt,i(t.errors.action_link_text.join(", ")),1)):r("",!0)]),n("div",ct,[o[23]||(o[23]=n("label",{for:"action_link2_href",class:"form-label"},"行動連結2網址",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.action_link2_href}]),id:"action_link2_href","onUpdate:modelValue":o[6]||(o[6]=a=>t.bannerData.action_link2_href=a)},null,2),[[_,t.bannerData.action_link2_href]]),t.errors.action_link2_href?(s(),e("div",_t,i(t.errors.action_link2_href.join(", ")),1)):r("",!0)]),n("div",bt,[o[24]||(o[24]=n("label",{for:"action_link2_text",class:"form-label"},"行動連結2文字",-1)),c(n("input",{type:"text",class:d(["form-control",{"is-invalid":t.errors.action_link2_text}]),id:"action_link2_text","onUpdate:modelValue":o[7]||(o[7]=a=>t.bannerData.action_link2_text=a)},null,2),[[_,t.bannerData.action_link2_text]]),t.errors.action_link2_text?(s(),e("div",mt,i(t.errors.action_link2_text.join(", ")),1)):r("",!0)])]),n("div",vt,[n("div",ft,[o[26]||(o[26]=n("label",{for:"status",class:"form-label"},"狀態",-1)),c(n("select",{class:d(["form-select",{"is-invalid":t.errors.status}]),id:"status","onUpdate:modelValue":o[8]||(o[8]=a=>t.bannerData.status=a)},o[25]||(o[25]=[n("option",{value:"active"},"啟用",-1),n("option",{value:"inactive"},"未啟用",-1)]),2),[[L,t.bannerData.status]]),t.errors.status?(s(),e("div",kt,i(t.errors.status.join(", ")),1)):r("",!0)]),n("div",ut,[o[28]||(o[28]=n("label",{for:"image",class:"form-label"},"圖片",-1)),n("input",{type:"file",class:d(["form-control",{"is-invalid":t.errors.image}]),id:"image",onChange:o[9]||(o[9]=(...a)=>t.handleImageChange&&t.handleImageChange(...a)),accept:".jpg,.jpeg,.gif,.png,.webp"},null,34),o[29]||(o[29]=n("small",{class:"form-text text-muted"},"只能上傳 jpg、jpeg、gif、png 或 webp 格式的圖片",-1)),t.errors.image?(s(),e("div",gt,i(t.errors.image.join(", ")),1)):r("",!0),t.imagePreview?(s(),e("div",yt,[n("img",{src:t.imagePreview,alt:"Banner Preview",class:"img-fluid",style:{"max-width":"200px"}},null,8,xt),o[27]||(o[27]=n("br",null,null,-1)),n("button",{type:"button",class:"btn btn-sm btn-danger mt-2",onClick:o[10]||(o[10]=(...a)=>t.clearImage&&t.clearImage(...a))},"清除圖片")])):r("",!0)]),n("div",Dt,[o[30]||(o[30]=n("label",{for:"sort",class:"form-label"},"排序",-1)),c(n("input",{type:"number",class:d(["form-control",{"is-invalid":t.errors.sort}]),id:"sort","onUpdate:modelValue":o[11]||(o[11]=a=>t.bannerData.sort=a)},null,2),[[_,t.bannerData.sort]]),t.errors.sort?(s(),e("div",wt,i(t.errors.sort.join(", ")),1)):r("",!0)])])]),n("div",ht,[n("button",{type:"submit",class:"btn btn-primary me-2",disabled:t.isLoading},i(t.isLoading?"更新中...":"更新橫幅"),9,Mt),n("button",{type:"button",class:"btn btn-secondary",onClick:o[12]||(o[12]=(...a)=>t.goBack&&t.goBack(...a)),disabled:t.isLoading}," 返回 ",8,jt)])],32)])])])])]),w(y)])]),t.showModal?(s(),e("div",{key:0,class:"modal-backdrop",onClick:o[14]||(o[14]=(...a)=>t.closeModal&&t.closeModal(...a))})):r("",!0),n("div",{class:d(["modal",{"d-block":t.showModal}]),tabindex:"-1"},[n("div",Bt,[n("div",Vt,[n("div",pt,[o[32]||(o[32]=n("h5",{class:"modal-title"},"提示",-1)),n("button",{type:"button",class:"btn-close",onClick:o[15]||(o[15]=(...a)=>t.closeModal&&t.closeModal(...a))})]),n("div",Ct,[n("p",null,i(t.modalMessage),1)]),n("div",Ut,[n("button",{type:"button",class:"btn btn-secondary",onClick:o[16]||(o[16]=(...a)=>t.closeModal&&t.closeModal(...a))},"關閉")])])])],2)],64)}const St=F(A,[["render",Ft],["__scopeId","data-v-2712a46f"]]);export{St as default};
