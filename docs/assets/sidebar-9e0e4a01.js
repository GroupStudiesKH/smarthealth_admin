import{_ as k,o as t,c as i,b as s,m as v,i as $,r as m,j as S,t as p,n,a as o}from"./index-b0115a16.js";import{a as _}from"./api-service-e3b33b42.js";const M={},x={class:"footer d-flex flex-row align-items-center justify-content-between px-4 py-3 border-top small"};function N(u,l){return t(),i("footer",x,l[0]||(l[0]=[s("p",{class:"text-secondary mb-1 mb-md-0"},[v(" Copyright © 2025 "),s("a",{href:"#",target:"_blank"},"工業技術研究院"),v(". ")],-1)]))}const $s=k(M,[["render",N]]),D={setup(){const u=$(),l=m({name:"Admin User",email:"user@user.com"}),a=m([]),e=m([]),r=m(0),d=m(0),b=async()=>{try{const c=await _.adminMe();c?(sessionStorage.setItem("userData",JSON.stringify(c)),l.value=c):console.error("Invalid response format:",c)}catch(c){console.error("Error fetching admin data:",c),u.push("/login"),localStorage.removeItem("access_token")}},f=async()=>{try{await _.adminLogout(),l.value=null,localStorage.removeItem("access_token"),sessionStorage.removeItem("userData"),u.push("/login")}catch(c){console.error("Logout error:",c)}},y=()=>{const c=document.body,g=document.querySelectorAll(".sidebar-toggler");g.length&&(g.forEach(h=>{h.addEventListener("click",function(w){w.preventDefault(),document.querySelector(".sidebar .sidebar-toggler").classList.toggle("active"),window.matchMedia("(min-width: 992px)").matches?c.classList.toggle("sidebar-folded"):window.matchMedia("(max-width: 991px)").matches&&c.classList.toggle("sidebar-open")})}),window.addEventListener("resize",function(h){c.classList.remove("sidebar-folded","sidebar-open"),document.querySelector(".sidebar .sidebar-toggler").classList.remove("active")},!0))};return S(()=>{b(),y()}),{userData:l,logout:f,notifications:a,messages:e,notificationCount:r,messageCount:d}}},L={class:"navbar"},q={class:"navbar-content"},I={class:"navbar-nav"},W={class:"nav-item dropdown"},C={class:"nav-link dropdown-toggle",href:"#",id:"profileDropdown",role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},E={class:"dropdown-menu p-0","aria-labelledby":"profileDropdown"},z={class:"d-flex flex-column align-items-center border-bottom px-5 py-3"},A={class:"text-center"},B={class:"fs-16px fw-bolder"},F={class:"fs-12px text-secondary"},V={class:"list-unstyled p-1"},j={class:"dropdown-item py-2"};function H(u,l,a,e,r,d){return t(),i("nav",L,[s("div",q,[l[3]||(l[3]=s("div",{class:"logo-mini-wrapper"},[s("h4",{class:"text-primary"},"SmartHealth")],-1)),s("ul",I,[s("li",W,[s("a",C,p(e.userData.name),1),s("div",E,[s("div",z,[s("div",A,[s("p",B,p(e.userData.name),1),s("p",F,p(e.userData.email),1)])]),s("ul",V,[l[2]||(l[2]=s("li",{class:"dropdown-item py-2"},[s("a",{href:"/user/edit",class:"text-body ms-0"},[s("i",{class:"me-2 icon-md material-icons"},"edit"),s("span",null,"編輯資料")])],-1)),s("li",j,[s("div",{role:"button",onClick:l[0]||(l[0]=b=>e.logout()),class:"text-body ms-0"},l[1]||(l[1]=[s("i",{class:"me-2 icon-md material-icons"},"logout",-1),s("span",null,"登出",-1)]))])])])])]),l[4]||(l[4]=s("a",{href:"#",class:"sidebar-toggler"},[s("i",{class:"material-icons",style:{"font-size":"24px"}},"menu")],-1))])])}const Ss=k(D,[["render",H]]),J={class:"sidebar"},O={class:"sidebar-body"},T={class:"nav",id:"sidebarNav"},P={class:"collapse","data-bs-parent":"#sidebarNav",id:"courseManagement"},Q={class:"nav sub-menu"},R={key:0,class:"nav-item"},U={key:1,class:"nav-item"},G={key:2,class:"nav-item"},K={key:3,class:"nav-item"},X={class:"collapse","data-bs-parent":"#sidebarNav",id:"memberManagement"},Y={class:"nav sub-menu"},Z={key:0,class:"nav-item"},ss={class:"collapse","data-bs-parent":"#sidebarNav",id:"statisticsManagement"},es={class:"nav sub-menu"},as={key:0,class:"nav-item"},ts={class:"collapse","data-bs-parent":"#sidebarNav",id:"examManagement"},is={class:"nav sub-menu"},ns={key:0,class:"nav-item"},os={class:"collapse","data-bs-parent":"#sidebarNav",id:"siteSettings"},rs={class:"nav sub-menu"},ls={key:0,class:"nav-item"},cs={key:1,class:"nav-item"},ds={class:"collapse","data-bs-parent":"#sidebarNav",id:"layoutSettings"},us={class:"nav sub-menu"},ms={key:0,class:"nav-item"},ps={key:1,class:"nav-item"},vs={key:2,class:"nav-item"},bs={key:3,class:"nav-item"},gs={key:4,class:"nav-item"},hs={class:"collapse","data-bs-parent":"#sidebarNav",id:"permissionManagement"},_s={class:"nav sub-menu"},ks={key:0,class:"nav-item"},fs={key:1,class:"nav-item"},Ms={__name:"sidebar",setup(u,{expose:l}){const a=(e,r)=>{const d=JSON.parse(localStorage.getItem("userData")||sessionStorage.getItem("userData")||"{}");return d.permissions&&d.permissions[e]&&d.permissions[e].includes(r)};return l({hasPermission:a}),(e,r)=>(t(),i("nav",J,[r[7]||(r[7]=s("div",{class:"sidebar-header"},[s("a",{href:"/",class:"sidebar-brand"},[v(" Smart"),s("span",null,"Health")]),s("div",{class:"sidebar-toggler"},[s("span"),s("span"),s("span")])],-1)),s("div",O,[s("ul",T,[a("course-management","list")?(t(),i("li",{key:0,class:n(["nav-item",{active:e.$route.path.startsWith("/course")}])},[r[0]||(r[0]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#courseManagement",role:"button","aria-expanded":"false","aria-controls":"courseManagement"},[s("i",{class:"link-icon material-icons"},"school"),s("span",{class:"link-title"},"課程管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",P,[s("ul",Q,[a("course-list","list")?(t(),i("li",R,[s("a",{href:"/course",class:n(["nav-link",{active:e.$route.path==="/course/list"}])},"課程列表",2)])):o("",!0),a("course-category","list")?(t(),i("li",U,[s("a",{href:"/course/category",class:n(["nav-link",{active:e.$route.path==="/course/category"}])},"分類管理",2)])):o("",!0),a("course-tag","list")?(t(),i("li",G,[s("a",{href:"/course/tag",class:n(["nav-link",{active:e.$route.path==="/course/tag"}])},"標籤管理",2)])):o("",!0),a("course-instructor","list")?(t(),i("li",K,[s("a",{href:"/course/instructor",class:n(["nav-link",{active:e.$route.path==="/course/instructor"}])},"講師列表",2)])):o("",!0)])])],2)):o("",!0),a("member-management","list")?(t(),i("li",{key:1,class:n(["nav-item",{active:e.$route.path.startsWith("/member")}])},[r[1]||(r[1]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#memberManagement",role:"button","aria-expanded":"false","aria-controls":"memberManagement"},[s("i",{class:"link-icon material-icons"},"people"),s("span",{class:"link-title"},"會員管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",X,[s("ul",Y,[a("member-list","list")?(t(),i("li",Z,[s("a",{href:"/member",class:n(["nav-link",{active:e.$route.path==="/member"}])},"會員列表",2)])):o("",!0)])])],2)):o("",!0),a("course-statistics","list")?(t(),i("li",{key:2,class:n(["nav-item",{active:e.$route.path.startsWith("/statistics")}])},[r[2]||(r[2]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#statisticsManagement",role:"button","aria-expanded":"false","aria-controls":"statisticsManagement"},[s("i",{class:"link-icon material-icons"},"analytics"),s("span",{class:"link-title"},"課程統計"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",ss,[s("ul",es,[a("course-progress","list")?(t(),i("li",as,[s("a",{href:"/statistics/progress",class:n(["nav-link",{active:e.$route.path==="/statistics/progress"}])},"學習進度統計",2)])):o("",!0)])])],2)):o("",!0),a("exam-statistics","list")?(t(),i("li",{key:3,class:n(["nav-item",{active:e.$route.path.startsWith("/exam")}])},[r[3]||(r[3]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#examManagement",role:"button","aria-expanded":"false","aria-controls":"examManagement"},[s("i",{class:"link-icon material-icons"},"quiz"),s("span",{class:"link-title"},"測驗管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",ts,[s("ul",is,[a("exam-statistics","list")?(t(),i("li",ns,[s("a",{href:"/exam/statistics",class:n(["nav-link",{active:e.$route.path==="/exam/statistics"}])},"課程測驗列表",2)])):o("",!0)])])],2)):o("",!0),a("site-brand","list")||a("site-social","list")?(t(),i("li",{key:4,class:n(["nav-item",{active:e.$route.path.startsWith("/settings")}])},[r[4]||(r[4]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#siteSettings",role:"button","aria-expanded":"false","aria-controls":"siteSettings"},[s("i",{class:"link-icon material-icons"},"settings"),s("span",{class:"link-title"},"網站基本設定"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",os,[s("ul",rs,[a("site-brand","list")?(t(),i("li",ls,[s("a",{href:"/settings/brand",class:n(["nav-link",{active:e.$route.path==="/settings/brand"}])},"品牌設定",2)])):o("",!0),a("site-social","list")?(t(),i("li",cs,[s("a",{href:"/settings/social",class:n(["nav-link",{active:e.$route.path==="/settings/social"}])},"社群設定",2)])):o("",!0)])])],2)):o("",!0),a("layout-banner-management","list")||a("content-faq","edit")||a("content-about","edit")||a("content-privacy","edit")||a("content-security","edit")?(t(),i("li",{key:5,class:n(["nav-item",{active:e.$route.path.startsWith("/layout")}])},[r[5]||(r[5]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#layoutSettings",role:"button","aria-expanded":"false","aria-controls":"layoutSettings"},[s("i",{class:"link-icon material-icons"},"dashboard"),s("span",{class:"link-title"},"介紹頁面管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",ds,[s("ul",us,[a("layout-banner-management","list")?(t(),i("li",ms,[s("a",{href:"/layout/banner",class:n(["nav-link",{active:e.$route.path==="/layout/banner"}])},"首頁Banner管理",2)])):o("",!0),a("content-faq","edit")?(t(),i("li",ps,[s("a",{href:"/content/faq",class:n(["nav-link",{active:e.$route.path==="/content/faq"}])},"FAQ",2)])):o("",!0),a("content-about","edit")?(t(),i("li",vs,[s("a",{href:"/content/about",class:n(["nav-link",{active:e.$route.path==="/content/about"}])},"計劃緣起",2)])):o("",!0),a("content-privacy","edit")?(t(),i("li",bs,[s("a",{href:"/content/privacy",class:n(["nav-link",{active:e.$route.path==="/content/privacy"}])},"隱私權政策",2)])):o("",!0),a("content-security","edit")?(t(),i("li",gs,[s("a",{href:"/content/security",class:n(["nav-link",{active:e.$route.path==="/content/security"}])},"資安政策",2)])):o("",!0)])])],2)):o("",!0),a("permissions_group","list")?(t(),i("li",{key:6,class:n(["nav-item",{active:e.$route.path.startsWith("/permission")}])},[r[6]||(r[6]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#permissionManagement",role:"button","aria-expanded":"false","aria-controls":"permissionManagement"},[s("i",{class:"link-icon material-icons"},"security"),s("span",{class:"link-title"},"權限管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",hs,[s("ul",_s,[a("permissions_group","list")?(t(),i("li",ks,[s("a",{href:"/permission",class:n(["nav-link",{active:e.$route.path==="/permission"}])},"角色",2)])):o("",!0),a("permissions_group","list")?(t(),i("li",fs,[s("a",{href:"/admins",class:n(["nav-link",{active:e.$route.path==="/admins"}])},"管理員列表",2)])):o("",!0)])])],2)):o("",!0)])])]))}};export{$s as F,Ss as N,Ms as _};
