import{_ as E,p as F,u as N,r as l,i as S,j as y,o as i,c as t,k as g,b as a,d as C,e as c,g as u,n as _,t as n,a as m,v as U,F as A,f as L}from"./index-7e071105.js";import{F as T,N as B,_ as j}from"./sidebar-bb7b1f1a.js";const q={components:{Footer:T,Navbar:B,Sidebar:j},setup(){const k=F(),o=N(),f=l([]),s=l({id:o.params.id,name:"",email:"",permission_group_id:"",password:"",password_confirmation:""}),p=l(!1),b=l(""),v=l(""),d=l({}),w=()=>(d.value={},s.value.name.trim()||(d.value.name=["請填寫姓名"]),s.value.permission_group_id||(d.value.permission_group_id=["請選擇權限群組"]),s.value.password!==s.value.password_confirmation&&(d.value.password=["兩次輸入的密碼不一致"]),Object.keys(d.value).length===0),r=(e,V)=>{v.value=e,b.value=V,p.value=!0},M=()=>{p.value=!1},D=async()=>{try{const e=[{id:1,name:"超級管理員"},{id:2,name:"內容管理員"},{id:3,name:"一般管理員"}];f.value=e}catch(e){console.error("Error fetching permission list:",e),r("錯誤","獲取權限列表失敗，請再試一次")}},h=async()=>{try{const e={id:o.params.id,name:"管理員A",email:"admin_a@example.com",permission_group_id:1};s.value={...e,password:"",password_confirmation:""}}catch(e){console.error("Error fetching admin data:",e),r("錯誤","獲取管理員資料失敗，請再試一次")}},x=()=>{w()&&setTimeout(()=>{r("成功","管理員資料已成功更新"),k.push("/admins")},500)};return S(()=>{D(),h()}),{userData:s,adminEdit:x,permissionList:f,showModal:p,modalMessage:b,modalTitle:v,closeModal:M,errors:d}}},P={class:"main-wrapper"},R={class:"page-wrapper"},z={class:"page-content"},O={class:"row mb-4"},G={class:"col-12 col-lg-8 mx-auto stretch-card"},H={class:"card"},I={class:"card-body"},J={class:"mb-3"},K={key:0,class:"invalid-feedback"},Q={class:"mb-3"},W={class:"mb-3"},X=["value"],Y={key:0,class:"invalid-feedback"},Z={class:"mb-3"},$={key:0,class:"invalid-feedback"},ss={class:"mb-3"},os={key:0,class:"invalid-feedback"},as={class:"modal-dialog"},rs={class:"modal-content"},es={class:"modal-header"},is={class:"modal-title"},ts={class:"modal-body"},ds={class:"modal-footer"},ns={key:1,class:"modal-backdrop fade show"};function ls(k,o,f,s,p,b){const v=y("Sidebar"),d=y("Navbar"),w=y("Footer");return i(),t("div",P,[g(v),a("div",R,[g(d),a("div",z,[a("div",O,[a("div",G,[a("div",H,[a("div",I,[o[15]||(o[15]=a("h6",{class:"card-title"},"編輯管理員資料",-1)),a("form",{onSubmit:o[5]||(o[5]=C((...r)=>s.adminEdit&&s.adminEdit(...r),["prevent"]))},[a("div",J,[o[8]||(o[8]=a("label",{for:"name",class:"form-label"},"姓名",-1)),c(a("input",{type:"text",class:_(["form-control",{"is-invalid":s.errors.name}]),id:"name","onUpdate:modelValue":o[0]||(o[0]=r=>s.userData.name=r),required:""},null,2),[[u,s.userData.name]]),s.errors.name?(i(),t("div",K,n(s.errors.name[0]),1)):m("",!0)]),a("div",Q,[o[9]||(o[9]=a("label",{for:"email",class:"form-label"},"電子郵件",-1)),c(a("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":o[1]||(o[1]=r=>s.userData.email=r),disabled:""},null,512),[[u,s.userData.email]])]),a("div",W,[o[11]||(o[11]=a("label",{for:"permission_group_id",class:"form-label"},"權限群組",-1)),c(a("select",{class:_(["form-select",{"is-invalid":s.errors.permission_group_id}]),id:"permission_group_id","onUpdate:modelValue":o[2]||(o[2]=r=>s.userData.permission_group_id=r),required:""},[o[10]||(o[10]=a("option",{value:""},"請選擇權限群組",-1)),(i(!0),t(A,null,L(s.permissionList,r=>(i(),t("option",{key:r.id,value:r.id},n(r.name),9,X))),128))],2),[[U,s.userData.permission_group_id]]),s.errors.permission_group_id?(i(),t("div",Y,n(s.errors.permission_group_id[0]),1)):m("",!0)]),a("div",Z,[o[12]||(o[12]=a("label",{for:"password",class:"form-label"},"密碼",-1)),c(a("input",{type:"password",class:_(["form-control",{"is-invalid":s.errors.password}]),id:"password","onUpdate:modelValue":o[3]||(o[3]=r=>s.userData.password=r)},null,2),[[u,s.userData.password]]),s.errors.password?(i(),t("div",$,n(s.errors.password[0]),1)):m("",!0)]),a("div",ss,[o[13]||(o[13]=a("label",{for:"password_confirmation",class:"form-label"},"確認密碼",-1)),c(a("input",{type:"password",class:_(["form-control",{"is-invalid":s.errors.password}]),id:"password_confirmation","onUpdate:modelValue":o[4]||(o[4]=r=>s.userData.password_confirmation=r)},null,2),[[u,s.userData.password_confirmation]]),s.errors.password?(i(),t("div",os,n(s.errors.password[0]),1)):m("",!0)]),o[14]||(o[14]=a("button",{type:"submit",class:"btn btn-primary"},"更新資料",-1))],32)])])])]),s.showModal?(i(),t("div",{key:0,class:_(["modal fade",{show:s.showModal}]),tabindex:"-1",style:{display:"block"}},[a("div",as,[a("div",rs,[a("div",es,[a("h5",is,n(s.modalTitle),1),a("button",{type:"button",class:"btn-close",onClick:o[6]||(o[6]=(...r)=>s.closeModal&&s.closeModal(...r))})]),a("div",ts,[a("p",null,n(s.modalMessage),1)]),a("div",ds,[a("button",{type:"button",class:"btn btn-secondary",onClick:o[7]||(o[7]=(...r)=>s.closeModal&&s.closeModal(...r))},"關閉")])])])],2)):m("",!0),s.showModal?(i(),t("div",ns)):m("",!0)]),g(w)])])}const _s=E(q,[["render",ls]]);export{_s as default};
