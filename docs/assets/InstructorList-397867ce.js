import{_ as S,r as s,i as N,j as b,o as r,c as d,k as i,b as t,y as C,e as P,g as F,F as w,f as x,n as y,d as k,l as I,t as c,E as L}from"./index-56250ee1.js";import{F as V,N as j,_ as B,a as M}from"./sidebar-e7787657.js";const D={components:{Footer:V,Navbar:j,Sidebar:B},setup(){const _=s([]),e=s({current_page:1,total:0,per_page:10}),m=s(""),n=s(1),g=s(0),v=s(""),p=()=>{n.value=1,a()},h=o=>{v.value=o},u=()=>{M.delInstructor(v.value).then(o=>{a(),$("#delConfirmModal").modal("hide")}).catch(o=>{console.error("刪除講師失敗:",o)})},f=o=>{n.value=o,a()},a=async()=>{try{const o=await M.getInstructors({page:n.value,per_page:e.value.per_page,search:m.value});_.value=o.data.map(l=>({id:l.id,name:l.name,note:l.note,created_at:l.created_at,index_show:l.index_show})),e.value.total=o.pagination.total,e.value.per_page=o.pagination.per_page,g.value=o.pagination.last_page,n.value=o.pagination.current_page}catch(o){console.error("獲取講師列表失敗:",o)}};return N(()=>{a()}),{instructors:_,searchQuery:m,handleSearch:p,currentPage:n,totalPages:g,deleteInstructor:h,changePage:f,pagination:e,delInstructor:u}}},Q={class:"main-wrapper"},E={class:"page-wrapper"},T={class:"page-content"},z={class:"row"},U={class:"col-md-12 grid-margin stretch-card"},q={class:"card"},A={class:"card-body"},G={class:"d-flex justify-content-between align-items-center mb-4"},H={class:"row mb-4"},J={class:"col-md-4"},K={class:"input-group"},O={class:"table-responsive"},R={class:"table table-hover"},W=["onClick"],X={class:"mt-4 d-flex justify-content-center"},Y={class:"pagination"},Z=["onClick"],tt={class:"modal fade",id:"delConfirmModal",tabindex:"-1","aria-labelledby":"delConfirmModalLabel","aria-hidden":"true"},et={class:"modal-dialog"},at={class:"modal-content"},nt={class:"modal-footer"};function ot(_,e,m,n,g,v){const p=b("Sidebar"),h=b("Navbar"),u=b("router-link"),f=b("Footer");return r(),d("div",Q,[i(p),t("div",E,[i(h),t("div",T,[t("div",z,[t("div",U,[t("div",q,[t("div",A,[t("div",G,[e[6]||(e[6]=t("h6",{class:"card-title mb-0"},"講師列表",-1)),i(u,{to:"/course/instructor/add",class:"btn btn-primary"},{default:C(()=>e[5]||(e[5]=[I(" 新增講師 ")])),_:1})]),t("div",H,[t("div",J,[t("div",K,[P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchQuery=a),placeholder:"搜尋講師名稱"},null,512),[[F,n.searchQuery]]),t("button",{class:"btn btn-primary",type:"button",onClick:e[1]||(e[1]=(...a)=>n.handleSearch&&n.handleSearch(...a))}," 搜尋 ")])])]),t("div",O,[t("table",R,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"講師名稱"),t("th",null,"備註"),t("th",null,"展示在首頁"),t("th",null,"新增日期"),t("th",null,"操作")])],-1)),t("tbody",null,[(r(!0),d(w,null,x(n.instructors,a=>(r(),d("tr",{key:a.id},[t("td",null,c(a.name),1),t("td",null,c(a.note),1),t("td",null,c(a.index_show?"是":"否"),1),t("td",null,c(a.created_at),1),t("td",null,[i(u,{to:`/course/instructor/edit/${a.id}`,class:"btn btn-sm btn-outline-primary me-2"},{default:C(()=>e[7]||(e[7]=[I(" 編輯 ")])),_:2},1032,["to"]),t("button",{class:"btn btn-sm btn-outline-danger",onClick:o=>n.deleteInstructor(a.id),"data-bs-toggle":"modal","data-bs-target":"#delConfirmModal"}," 刪除 ",8,W)])]))),128))])])]),t("nav",X,[t("ul",Y,[t("li",{class:y(["page-item",{disabled:n.currentPage===1}])},[t("a",{class:"page-link",href:"#",onClick:e[2]||(e[2]=k(a=>n.changePage(n.currentPage),["prevent"]))}," 上一頁 ")],2),(r(!0),d(w,null,x(n.totalPages,a=>P((r(),d("li",{key:a,class:y(["page-item",{active:n.currentPage===a}])},[t("a",{class:"page-link",href:"#",onClick:k(o=>n.changePage(a),["prevent"])},c(a),9,Z)],2)),[[L,Math.abs(a-n.pagination.current_page)<=2||a===1||a===n.totalPages]])),128)),t("li",{class:y(["page-item",{disabled:n.currentPage===n.totalPages}])},[t("a",{class:"page-link",href:"#",onClick:e[3]||(e[3]=k(a=>n.changePage(n.currentPage+1),["prevent"]))}," 下一頁 ")],2)])])])])])])]),t("div",tt,[t("div",et,[t("div",at,[e[10]||(e[10]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"delConfirmModalLabel"},"確認刪除？"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"btn-close"})],-1)),e[11]||(e[11]=t("div",{class:"modal-body"}," 請確認是否刪除 ",-1)),t("div",nt,[e[9]||(e[9]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=a=>n.delInstructor())},"確認")])])])]),i(f)])])}const rt=S(D,[["render",ot]]);export{rt as default};
