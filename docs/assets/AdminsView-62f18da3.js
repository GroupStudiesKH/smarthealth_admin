import{_ as C,p as A,r as g,s as x,l as h,o as i,c as l,m as v,a as e,F as y,e as P,n as b,b as f,t as r}from"./index-2084911f.js";import{F,N as w,_ as N}from"./sidebar-d4d14e1c.js";const S={components:{Footer:F,Navbar:w,Sidebar:N},setup(){const c=A(),a=g([]),d=g(1),n=g(1),k=10,m=async(s=1)=>{try{const o={data:[{id:1,name:"管理員A",email:"admin_a@example.com",permission_group:{name:"教師"}},{id:2,name:"管理員B",email:"admin_b@example.com",permission_group:{name:"小編"}},{id:3,name:"管理員C",email:"admin_c@example.com",permission_group:{name:"超級管理員"}},{id:4,name:"管理員D",email:"admin_d@example.com",permission_group:{name:"超級管理員"}},{id:5,name:"管理員E",email:"admin_e@example.com",permission_group:{name:"教師"}}],total:15};a.value=o.data,n.value=Math.ceil(o.total/k),d.value=s}catch(o){console.error("Failed to fetch admin data:",o)}},_=async s=>{if(confirm("您確定要刪除這個管理員嗎？"))try{a.value=a.value.filter(o=>o.id!==s),alert("管理員已成功刪除")}catch(o){console.error("Failed to delete admin:",o),alert("刪除管理員時發生錯誤")}},u=s=>{c.push(`/admins/${s}/edit`)},p=s=>{m(s)},t=()=>{c.push("/admins/add")};return x(()=>{m()}),{admins:a,currentPage:d,totalPages:n,editAdmin:u,deleteAdmin:_,changePage:p,addAdmin:t}}},B={class:"main-wrapper"},D={class:"page-wrapper"},M={class:"page-content"},V={class:"row"},j={class:"col-12 stretch-card"},z={class:"card"},E={class:"card-body"},I={class:"d-flex justify-content-between align-items-center mb-3"},L={class:"table-responsive"},R={class:"table"},q=["onClick"],G=["onClick"],H={class:"mt-4"},J={class:"pagination justify-content-center"},K=["onClick"];function O(c,a,d,n,k,m){const _=h("Sidebar"),u=h("Navbar"),p=h("Footer");return i(),l("div",B,[v(_),e("div",D,[v(u),e("div",M,[e("div",V,[e("div",j,[e("div",z,[e("div",E,[e("div",I,[a[3]||(a[3]=e("h6",{class:"card-title"},"管理員列表",-1)),e("button",{onClick:a[0]||(a[0]=(...t)=>n.addAdmin&&n.addAdmin(...t)),class:"btn btn-primary"},"新增管理員")]),e("div",L,[e("table",R,[a[4]||(a[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"名稱"),e("th",null,"電子郵件"),e("th",null,"權限群組"),e("th",null,"操作")])],-1)),e("tbody",null,[(i(!0),l(y,null,P(n.admins,t=>(i(),l("tr",{key:t.id},[e("td",null,r(t.id),1),e("td",null,r(t.name),1),e("td",null,r(t.email),1),e("td",null,r(t.permission_group.name),1),e("td",null,[e("button",{onClick:s=>n.editAdmin(t.id),class:"btn btn-primary btn-sm me-2"}," 編輯 ",8,q),e("button",{onClick:s=>n.deleteAdmin(t.id),class:"btn btn-danger btn-sm"}," 刪除 ",8,G)])]))),128))])])]),e("nav",H,[e("ul",J,[e("li",{class:b(["page-item",{disabled:n.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:a[1]||(a[1]=f(t=>n.changePage(n.currentPage-1),["prevent"]))},"上一頁")],2),(i(!0),l(y,null,P(n.totalPages,t=>(i(),l("li",{key:t,class:b(["page-item",{active:n.currentPage===t}])},[e("a",{class:"page-link",href:"#",onClick:f(s=>n.changePage(t),["prevent"])},r(t),9,K)],2))),128)),e("li",{class:b(["page-item",{disabled:n.currentPage===n.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:a[2]||(a[2]=f(t=>n.changePage(n.currentPage+1),["prevent"]))},"下一頁")],2)])])])])])])]),v(p)])])}const U=C(S,[["render",O]]);export{U as default};
