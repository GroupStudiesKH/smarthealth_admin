import{_ as F,i as I,u as A,r as D,q as O,j as T,k as _,o as t,c as r,b as l,l as w,t as i,d as j,m as n,e as s,g as d,n as b,a as m,s as R,v as L,F as S,f as N,x,y as K,h as G,p as H}from"./index-5d22d589.js";import{a as h}from"./api-service-a37f4a4e.js";import{F as q,N as J,_ as Q}from"./sidebar-5fc827b6.js";import{L as Y}from"./loading-fb24fc9e.js";const Z={components:{Footer:q,Navbar:J,Sidebar:Q,Loading:Y},setup(){const z=I(),a=A(),g=a.params.id!==void 0,e=a.params.id,v=D(!1),C=[{value:"台灣",label:"台灣 (Taiwan)"},{value:"中國",label:"中國 (China)"},{value:"日本",label:"日本 (Japan)"},{value:"韓國",label:"韓國 (South Korea)"},{value:"新加坡",label:"新加坡 (Singapore)"},{value:"馬來西亞",label:"馬來西亞 (Malaysia)"},{value:"泰國",label:"泰國 (Thailand)"},{value:"越南",label:"越南 (Vietnam)"},{value:"菲律賓",label:"菲律賓 (Philippines)"},{value:"印尼",label:"印尼 (Indonesia)"},{value:"印度",label:"印度 (India)"},{value:"巴基斯坦",label:"巴基斯坦 (Pakistan)"},{value:"孟加拉",label:"孟加拉 (Bangladesh)"},{value:"斯里蘭卡",label:"斯里蘭卡 (Sri Lanka)"},{value:"緬甸",label:"緬甸 (Myanmar)"},{value:"柬埔寨",label:"柬埔寨 (Cambodia)"},{value:"寮國",label:"寮國 (Laos)"},{value:"蒙古",label:"蒙古 (Mongolia)"},{value:"哈薩克",label:"哈薩克 (Kazakhstan)"},{value:"烏茲別克",label:"烏茲別克 (Uzbekistan)"},{value:"英國",label:"英國 (United Kingdom)"},{value:"法國",label:"法國 (France)"},{value:"德國",label:"德國 (Germany)"},{value:"義大利",label:"義大利 (Italy)"},{value:"西班牙",label:"西班牙 (Spain)"},{value:"葡萄牙",label:"葡萄牙 (Portugal)"},{value:"荷蘭",label:"荷蘭 (Netherlands)"},{value:"比利時",label:"比利時 (Belgium)"},{value:"瑞士",label:"瑞士 (Switzerland)"},{value:"奧地利",label:"奧地利 (Austria)"},{value:"瑞典",label:"瑞典 (Sweden)"},{value:"挪威",label:"挪威 (Norway)"},{value:"丹麥",label:"丹麥 (Denmark)"},{value:"芬蘭",label:"芬蘭 (Finland)"},{value:"冰島",label:"冰島 (Iceland)"},{value:"愛爾蘭",label:"愛爾蘭 (Ireland)"},{value:"波蘭",label:"波蘭 (Poland)"},{value:"捷克",label:"捷克 (Czech Republic)"},{value:"匈牙利",label:"匈牙利 (Hungary)"},{value:"斯洛伐克",label:"斯洛伐克 (Slovakia)"},{value:"斯洛維尼亞",label:"斯洛維尼亞 (Slovenia)"},{value:"克羅埃西亞",label:"克羅埃西亞 (Croatia)"},{value:"塞爾維亞",label:"塞爾維亞 (Serbia)"},{value:"保加利亞",label:"保加利亞 (Bulgaria)"},{value:"羅馬尼亞",label:"羅馬尼亞 (Romania)"},{value:"希臘",label:"希臘 (Greece)"},{value:"俄羅斯",label:"俄羅斯 (Russia)"},{value:"烏克蘭",label:"烏克蘭 (Ukraine)"},{value:"白俄羅斯",label:"白俄羅斯 (Belarus)"},{value:"立陶宛",label:"立陶宛 (Lithuania)"},{value:"拉脫維亞",label:"拉脫維亞 (Latvia)"},{value:"愛沙尼亞",label:"愛沙尼亞 (Estonia)"},{value:"美國",label:"美國 (United States)"},{value:"加拿大",label:"加拿大 (Canada)"},{value:"墨西哥",label:"墨西哥 (Mexico)"},{value:"巴西",label:"巴西 (Brazil)"},{value:"阿根廷",label:"阿根廷 (Argentina)"},{value:"智利",label:"智利 (Chile)"},{value:"秘魯",label:"秘魯 (Peru)"},{value:"哥倫比亞",label:"哥倫比亞 (Colombia)"},{value:"委內瑞拉",label:"委內瑞拉 (Venezuela)"},{value:"厄瓜多",label:"厄瓜多 (Ecuador)"},{value:"烏拉圭",label:"烏拉圭 (Uruguay)"},{value:"巴拉圭",label:"巴拉圭 (Paraguay)"},{value:"玻利維亞",label:"玻利維亞 (Bolivia)"},{value:"南非",label:"南非 (South Africa)"},{value:"埃及",label:"埃及 (Egypt)"},{value:"奈及利亞",label:"奈及利亞 (Nigeria)"},{value:"肯亞",label:"肯亞 (Kenya)"},{value:"衣索比亞",label:"衣索比亞 (Ethiopia)"},{value:"摩洛哥",label:"摩洛哥 (Morocco)"},{value:"阿爾及利亞",label:"阿爾及利亞 (Algeria)"},{value:"突尼西亞",label:"突尼西亞 (Tunisia)"},{value:"利比亞",label:"利比亞 (Libya)"},{value:"加納",label:"加納 (Ghana)"},{value:"澳洲",label:"澳洲 (Australia)"},{value:"紐西蘭",label:"紐西蘭 (New Zealand)"},{value:"斐濟",label:"斐濟 (Fiji)"},{value:"巴布亞紐幾內亞",label:"巴布亞紐幾內亞 (Papua New Guinea)"},{value:"以色列",label:"以色列 (Israel)"},{value:"土耳其",label:"土耳其 (Turkey)"},{value:"伊朗",label:"伊朗 (Iran)"},{value:"伊拉克",label:"伊拉克 (Iraq)"},{value:"沙烏地阿拉伯",label:"沙烏地阿拉伯 (Saudi Arabia)"},{value:"阿拉伯聯合大公國",label:"阿拉伯聯合大公國 (UAE)"},{value:"科威特",label:"科威特 (Kuwait)"},{value:"卡達",label:"卡達 (Qatar)"},{value:"巴林",label:"巴林 (Bahrain)"},{value:"阿曼",label:"阿曼 (Oman)"},{value:"約旦",label:"約旦 (Jordan)"},{value:"黎巴嫩",label:"黎巴嫩 (Lebanon)"},{value:"敘利亞",label:"敘利亞 (Syria)"},{value:"葉門",label:"葉門 (Yemen)"}],f=O({name:"",email:"",password:"",showPassword:!1,status:"active",created_at:"",last_login_at:"",registration_source:"",last_login_ip:"",role:"",roleOptions:[{value:"student",label:"學生"},{value:"teacher",label:"老師"},{value:"doctor",label:"醫師"},{value:"nurse",label:"護理人員"},{value:"vendor",label:"廠商"},{value:"other",label:"其他"}],organization:"",nationality:"",national_id:"",address:"",mobile:"",gender:"",birthdate:"",provider:""}),p=D({}),u=D(!1),c=D(""),M=async()=>{if(g)try{v.value=!0;const y=await h.getMember(e);v.value=!1,Object.assign(f,y)}catch(y){console.error("Failed to fetch member data:",y),c.value="獲取會員資料失敗",u.value=!0,v.value=!1}},o=async()=>{var y,E;try{p.value={},v.value=!0,g?await h.editMember(e,f):await h.addMember(f),v.value=!1,z.push("/member")}catch(k){if(console.error("Failed to save member:",k),v.value=!1,((E=(y=k.response)==null?void 0:y.data)==null?void 0:E.status)==="error")if(k.response.data.content){const U={};for(const[B,V]of Object.entries(k.response.data.content))U[B]=Array.isArray(V)?V[0].replace(/[\[\]"]/g,""):V;p.value=U;const P=Object.values(U).join("<br/>");c.value=P,u.value=!0}else c.value=k.response.data.message||"儲存失敗",u.value=!0;else c.value="儲存失敗",u.value=!0,v.value=!1}};return T(()=>{g&&M()}),{formData:f,nationalityOptions:C,errors:p,isEdit:g,loading:v,showModal:u,modalMessage:c,handleSubmit:o}}},W={class:"main-wrapper"},X={class:"page-wrapper"},$={class:"page-content"},aa={class:"row"},la={class:"col-md-12 grid-margin stretch-card"},ea={class:"card"},oa={class:"card-body"},sa={class:"card-title"},ta={class:"row"},ra={class:"col-md-6 col-12 mb-3"},ia=["disabled"],na={key:0,class:"invalid-feedback"},da={class:"col-md-6 col-12 mb-3"},ma={key:0,class:"invalid-feedback"},ba={class:"col-md-6 col-12 mb-3"},va={class:"input-group"},ua=["type","placeholder"],ca={class:"material-icons"},fa={key:0,class:"invalid-feedback"},ya={class:"col-md-6 col-12 mb-3"},ga=["value"],pa={key:0,class:"invalid-feedback"},ka={class:"col-md-6 col-12 mb-3"},_a={key:0,class:"invalid-feedback"},Da={class:"col-md-6 col-12 mb-3"},wa=["value"],xa={key:0,class:"invalid-feedback"},Ma={class:"col-md-6 col-12 mb-3"},Ua={class:"col-md-6 col-12 mb-3"},Va={class:"col-md-6 col-12 mb-3"},Sa={key:0,class:"invalid-feedback"},ha={class:"col-md-6 col-12 mb-3"},za={class:"form-check"},Ca={class:"form-check"},Ea={key:0,class:"invalid-feedback"},La={class:"col-md-6 col-12 mb-3"},Na={class:"form-check"},Pa={class:"form-check"},Ba={class:"form-check"},Fa={class:"col-md-6 col-12 mb-3"},Ia={key:0},Aa={class:"col-md-6 col-12 mb-3"},Oa={class:"col-md-6 col-12 mb-3"},Ta={class:"col-md-6 col-12 mb-3"},ja={class:"col-md-6 col-12 mb-3"},Ra={class:"col-md-6 col-12 mb-3"},Ka={class:"modal-dialog"},Ga={class:"modal-content"},Ha={class:"modal-header"},qa=["innerHTML"],Ja={class:"modal-footer"},Qa={key:0,class:"modal-backdrop fade show"};function Ya(z,a,g,e,v,C){const f=_("Sidebar"),p=_("Navbar"),u=_("router-link"),c=_("Footer"),M=_("Loading");return t(),r(S,null,[l("div",W,[w(f),l("div",X,[w(p),l("div",$,[l("div",aa,[l("div",la,[l("div",ea,[l("div",oa,[l("h6",sa,i(e.isEdit?"編輯會員":"新增會員"),1),l("form",{onSubmit:a[20]||(a[20]=j((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"]))},[l("div",ta,[l("div",ra,[a[23]||(a[23]=l("label",{class:"form-label"},[n("Email "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"email",class:b(["form-control",{"is-invalid":e.errors.email}]),"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.email=o),disabled:e.isEdit},null,10,ia),[[d,e.formData.email]]),e.errors.email?(t(),r("div",na,i(e.errors.email),1)):m("",!0)]),l("div",da,[a[24]||(a[24]=l("label",{class:"form-label"},[n("會員名稱 "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"text",class:b(["form-control",{"is-invalid":e.errors.name}]),"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.name=o)},null,2),[[d,e.formData.name]]),e.errors.name?(t(),r("div",ma,i(e.errors.name),1)):m("",!0)]),l("div",ba,[a[25]||(a[25]=l("label",{class:"form-label"},[n("密碼 "),l("span",{class:"text-danger"},"*")],-1)),l("div",va,[s(l("input",{type:e.formData.showPassword?"text":"password",class:b(["form-control",{"is-invalid":e.errors.password}]),"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.password=o),placeholder:e.isEdit?"不修改請留空":""},null,10,ua),[[R,e.formData.password]]),l("button",{class:"btn btn-outline-secondary",type:"button",onClick:a[3]||(a[3]=o=>e.formData.showPassword=!e.formData.showPassword)},[l("i",ca,i(e.formData.showPassword?"visibility_off":"visibility"),1)]),e.errors.password?(t(),r("div",fa,i(e.errors.password),1)):m("",!0)])]),l("div",ya,[a[27]||(a[27]=l("label",{class:"form-label"},[n("身份別 "),l("span",{class:"text-danger"},"*")],-1)),s(l("select",{class:b(["form-select",{"is-invalid":e.errors.role}]),"onUpdate:modelValue":a[4]||(a[4]=o=>e.formData.role=o)},[a[26]||(a[26]=l("option",{value:""},"請選擇身份別",-1)),(t(!0),r(S,null,N(e.formData.roleOptions,o=>(t(),r("option",{key:o.value,value:o.value},i(o.label),9,ga))),128))],2),[[L,e.formData.role]]),e.errors.role?(t(),r("div",pa,i(e.errors.role),1)):m("",!0)]),l("div",ka,[a[28]||(a[28]=l("label",{class:"form-label"},[n("任職單位 "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"text",class:b(["form-control",{"is-invalid":e.errors.organization}]),"onUpdate:modelValue":a[5]||(a[5]=o=>e.formData.organization=o)},null,2),[[d,e.formData.organization]]),e.errors.organization?(t(),r("div",_a,i(e.errors.organization),1)):m("",!0)]),l("div",Da,[a[30]||(a[30]=l("label",{class:"form-label"},[n("國籍 "),l("span",{class:"text-danger"},"*")],-1)),s(l("select",{class:b(["form-select",{"is-invalid":e.errors.nationality}]),"onUpdate:modelValue":a[6]||(a[6]=o=>e.formData.nationality=o)},[a[29]||(a[29]=l("option",{value:""},"請選擇國籍",-1)),(t(!0),r(S,null,N(e.nationalityOptions,o=>(t(),r("option",{key:o.value,value:o.value},i(o.label),9,wa))),128))],2),[[L,e.formData.nationality]]),e.errors.nationality?(t(),r("div",xa,i(e.errors.nationality),1)):m("",!0)]),l("div",Ma,[a[31]||(a[31]=l("label",{class:"form-label"},[n("身分證字號/護照號碼 "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"text",class:b(["form-control",{"is-invalid":e.errors.national_id}]),"onUpdate:modelValue":a[7]||(a[7]=o=>e.formData.national_id=o)},null,2),[[d,e.formData.national_id]])]),l("div",Ua,[a[32]||(a[32]=l("label",{class:"form-label"},[n("地址 "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"text",class:b(["form-control",{"is-invalid":e.errors.address}]),"onUpdate:modelValue":a[8]||(a[8]=o=>e.formData.address=o)},null,2),[[d,e.formData.address]])]),l("div",Va,[a[33]||(a[33]=l("label",{class:"form-label"},[n("手機 "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"tel",class:b(["form-control",{"is-invalid":e.errors.mobile}]),"onUpdate:modelValue":a[9]||(a[9]=o=>e.formData.mobile=o)},null,2),[[d,e.formData.mobile]]),e.errors.mobile?(t(),r("div",Sa,i(e.errors.mobile),1)):m("",!0)]),l("div",ha,[a[36]||(a[36]=l("label",{class:"form-label"},[n("性別 "),l("span",{class:"text-danger"},"*")],-1)),l("div",za,[s(l("input",{type:"radio",class:"form-check-input",id:"male",value:"male","onUpdate:modelValue":a[10]||(a[10]=o=>e.formData.gender=o)},null,512),[[x,e.formData.gender]]),a[34]||(a[34]=l("label",{class:"form-check-label",for:"male"},"男性",-1))]),l("div",Ca,[s(l("input",{type:"radio",class:"form-check-input",id:"female",value:"female","onUpdate:modelValue":a[11]||(a[11]=o=>e.formData.gender=o)},null,512),[[x,e.formData.gender]]),a[35]||(a[35]=l("label",{class:"form-check-label",for:"female"},"女性",-1))]),e.errors.gender?(t(),r("div",Ea,i(e.errors.gender),1)):m("",!0)]),l("div",La,[a[39]||(a[39]=l("label",{class:"form-label"},"狀態",-1)),l("div",Na,[l("div",Pa,[s(l("input",{type:"radio",class:"form-check-input",id:"active",value:"active","onUpdate:modelValue":a[12]||(a[12]=o=>e.formData.status=o)},null,512),[[x,e.formData.status]]),a[37]||(a[37]=l("label",{class:"form-check-label",for:"active"},"啟用",-1))]),l("div",Ba,[s(l("input",{type:"radio",class:"form-check-input",id:"inactive",value:"inactive","onUpdate:modelValue":a[13]||(a[13]=o=>e.formData.status=o)},null,512),[[x,e.formData.status]]),a[38]||(a[38]=l("label",{class:"form-check-label",for:"inactive"},"停用",-1))])])]),l("div",Fa,[a[40]||(a[40]=l("label",{class:"form-label"},[n("生日 "),l("span",{class:"text-danger"},"*")],-1)),s(l("input",{type:"date",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=o=>e.formData.birthdate=o)},null,512),[[d,e.formData.birthdate]])]),e.isEdit?(t(),r("div",Ia,[l("div",Aa,[a[41]||(a[41]=l("label",{class:"form-label"},"註冊日期",-1)),s(l("input",{type:"text",class:"form-control","onUpdate:modelValue":a[15]||(a[15]=o=>e.formData.created_at=o),disabled:""},null,512),[[d,e.formData.created_at]])]),l("div",Oa,[a[42]||(a[42]=l("label",{class:"form-label"},"上次登入日期",-1)),s(l("input",{type:"text",class:"form-control","onUpdate:modelValue":a[16]||(a[16]=o=>e.formData.last_login_at=o),disabled:""},null,512),[[d,e.formData.last_login_at]])]),l("div",Ta,[a[43]||(a[43]=l("label",{class:"form-label"},"註冊來源",-1)),s(l("input",{type:"text",class:"form-control","onUpdate:modelValue":a[17]||(a[17]=o=>e.formData.registration_source=o),disabled:""},null,512),[[d,e.formData.registration_source]])]),l("div",ja,[a[44]||(a[44]=l("label",{class:"form-label"},"上次登入IP",-1)),s(l("input",{type:"text",class:"form-control","onUpdate:modelValue":a[18]||(a[18]=o=>e.formData.last_login_ip=o),disabled:""},null,512),[[d,e.formData.last_login_ip]])]),l("div",Ra,[a[45]||(a[45]=l("label",{class:"form-label"},"第三方註冊",-1)),s(l("input",{type:"text",class:"form-control","onUpdate:modelValue":a[19]||(a[19]=o=>e.formData.provider=o),disabled:""},null,512),[[d,e.formData.provider]])])])):m("",!0)]),a[47]||(a[47]=l("button",{type:"submit",class:"btn btn-primary me-2"},"儲存",-1)),w(u,{to:"/member",class:"btn btn-secondary"},{default:K(()=>a[46]||(a[46]=[n("取消")])),_:1})],32)])])])])]),w(c)]),l("div",{class:b(["modal fade",{show:e.showModal}]),tabindex:"-1",style:G({display:e.showModal?"block":"none"})},[l("div",Ka,[l("div",Ga,[l("div",Ha,[a[48]||(a[48]=l("h5",{class:"modal-title"},"錯誤提示",-1)),l("button",{type:"button",class:"btn-close",onClick:a[21]||(a[21]=o=>e.showModal=!1)})]),l("div",{class:"modal-body",innerHTML:e.modalMessage},null,8,qa),l("div",Ja,[l("button",{type:"button",class:"btn btn-secondary",onClick:a[22]||(a[22]=o=>e.showModal=!1)},"關閉")])])])],6),e.showModal?(t(),r("div",Qa)):m("",!0)]),e.loading?(t(),H(M,{key:0})):m("",!0)],64)}const al=F(Z,[["render",Ya]]);export{al as default};
