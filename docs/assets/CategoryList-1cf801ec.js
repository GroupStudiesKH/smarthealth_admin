import{_ as N,p as F,r as o,i as L,j as h,o as r,c as d,k as y,b as e,e as T,g as D,F as k,f as P,n as f,d as C,a as V,t as _}from"./index-56250ee1.js";import{F as j,N as B,_ as E,a as w}from"./sidebar-e7787657.js";const Q={components:{Footer:j,Navbar:B,Sidebar:E},setup(){const v=F(),a=o([]),p=o(""),t=o(1),i=o(10),c=o(!1),u=o(0),g=o(""),l=async()=>{c.value=!0;try{const n=await w.getTags({type:"category",page:t.value,per_page:i.value,search:p.value});a.value=n.data.map(b=>({id:b.id,name:b.name,courseCount:b.courses_count,createdAt:b.created_at})),i.value=n.pagination.per_page,u.value=n.pagination.last_page,t.value=n.pagination.current_page}catch(n){console.error("獲取分類失敗:",n)}finally{c.value=!1}},s=n=>{v.push(`/course/category/edit/${n}`)},m=n=>{g.value=n},S=async()=>{try{await w.delTag(g.value),l(),$("#delConfirmModal").modal("hide")}catch(n){console.error("刪除標籤失敗:",n)}},x=async n=>{t.value=n,await l()},M=()=>{t.value=1,l()};return L(()=>{l()}),{categories:a,searchQuery:p,currentPage:t,pageSize:i,loading:c,totalPages:u,handleEdit:s,handleDelete:m,changePage:x,handleSearch:M,delTag:S}}},z={class:"main-wrapper"},A={class:"page-wrapper"},I={class:"page-content"},R={class:"row mb-4"},U={class:"col-md-12 grid-margin stretch-card"},q={class:"card"},G={class:"card-body"},H={class:"d-flex justify-content-between align-items-center mb-4"},J={class:"mb-3 d-flex row gap-2"},K={class:"col-md-4"},O={class:"input-group"},W={class:"table-responsive"},X={class:"table"},Y=["onClick"],Z=["onClick"],ee={key:0,class:"mt-4"},te={class:"pagination justify-content-center"},ae=["onClick"],se={class:"modal fade",id:"delConfirmModal",tabindex:"-1","aria-labelledby":"delConfirmModalLabel","aria-hidden":"true"},ne={class:"modal-dialog"},oe={class:"modal-content"},le={class:"modal-footer"};function re(v,a,p,t,i,c){const u=h("Sidebar"),g=h("Navbar"),l=h("Footer");return r(),d("div",z,[y(u),e("div",A,[y(g),e("div",I,[e("div",R,[e("div",U,[e("div",q,[e("div",G,[e("div",H,[a[6]||(a[6]=e("h6",{class:"card-title mb-0"},"課程分類管理",-1)),e("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=s=>v.$router.push("/course/category/add"))},"新增分類")]),e("div",J,[e("div",K,[e("div",O,[T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=s=>t.searchQuery=s),placeholder:"搜尋分類名稱"},null,512),[[D,t.searchQuery]]),e("button",{class:"btn btn-primary",onClick:a[2]||(a[2]=(...s)=>t.handleSearch&&t.handleSearch(...s))}," 搜尋 ")])])]),e("div",W,[e("table",X,[a[7]||(a[7]=e("thead",null,[e("tr",null,[e("th",null,"分類名稱"),e("th",null,"課程數量"),e("th",null,"建立日期"),e("th",null,"操作")])],-1)),e("tbody",null,[(r(!0),d(k,null,P(t.categories,s=>(r(),d("tr",{key:s.id},[e("td",null,_(s.name),1),e("td",null,_(s.courseCount),1),e("td",null,_(s.createdAt),1),e("td",null,[e("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:m=>t.handleEdit(s.id)}," 編輯 ",8,Y),e("button",{class:"btn btn-sm btn-outline-danger",onClick:m=>t.handleDelete(s.id),"data-bs-toggle":"modal","data-bs-target":"#delConfirmModal"}," 刪除 ",8,Z)])]))),128))])])]),t.totalPages>0?(r(),d("nav",ee,[e("ul",te,[e("li",{class:f(["page-item",{disabled:t.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:a[3]||(a[3]=C(s=>t.changePage(t.currentPage>1?t.currentPage-1:1),["prevent"]))}," 上一頁 ")],2),(r(!0),d(k,null,P(t.totalPages,s=>(r(),d("li",{key:s,class:f(["page-item",{active:t.currentPage===s}])},[e("a",{class:"page-link",href:"#",onClick:C(m=>t.changePage(s),["prevent"])},_(s),9,ae)],2))),128)),e("li",{class:f(["page-item",{disabled:t.currentPage===t.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:a[4]||(a[4]=C(s=>t.changePage(t.currentPage<t.totalPages?t.currentPage+1:t.totalPages),["prevent"]))}," 下一頁 ")],2)])])):V("",!0)])])])])]),e("div",se,[e("div",ne,[e("div",oe,[a[9]||(a[9]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"delConfirmModalLabel"},"確認刪除？"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"btn-close"})],-1)),a[10]||(a[10]=e("div",{class:"modal-body"}," 請確認是否刪除 ",-1)),e("div",le,[a[8]||(a[8]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:a[5]||(a[5]=s=>t.delTag())},"確認")])])])]),y(l)])])}const ce=N(Q,[["render",re],["__scopeId","data-v-7925aea1"]]);export{ce as default};
