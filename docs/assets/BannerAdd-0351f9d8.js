import{_ as j,p as B,r as b,l as x,o as l,c as s,a,m as D,b as C,d as c,f as _,n as r,t as e,j as i,v as V,F as U}from"./index-2084911f.js";import{F as I,N as F,_ as N}from"./sidebar-d4d14e1c.js";const S={components:{Footer:I,Navbar:F,Sidebar:N},setup(){const k=B(),t=b({title:"",subtitle_1:"",subtitle_2:"",content:"",action_link_href:"",action_link_text:"",action_link2_href:"",action_link2_text:"",status:"active",image:null,sort:0}),w=b({}),o=b(!1),m=b(!1),f=b(""),v=b(null),g=async()=>{o.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),n("橫幅新增成功"),k.push("/layout/banner")}catch(d){console.error("Error adding banner:",d),u("橫幅新增失敗："+(d.message||"未知錯誤"))}finally{o.value=!1}},u=d=>{f.value=d,m.value=!0},n=d=>{f.value=d,m.value=!0};return{bannerData:t,addBanner:g,goBack:()=>{k.push("/layout/banner")},errors:w,isLoading:o,showModal:m,modalMessage:f,closeModal:()=>{m.value=!1},handleImageChange:d=>{const y=d.target.files[0];if(y){t.value.image=y;const M=new FileReader;M.onload=h=>{v.value=h.target.result},M.readAsDataURL(y)}},imagePreview:v,clearImage:()=>{t.value.image=null,v.value=null}}}},L={class:"main-wrapper"},P={class:"page-wrapper"},p={class:"page-content"},A={class:"row"},E={class:"col-12"},R={class:"card"},T={class:"card-body"},z={class:"row"},q={class:"col-md-6"},G={class:"mb-3"},H={key:0,class:"invalid-feedback"},J={class:"mb-3"},K={key:0,class:"invalid-feedback"},O={class:"mb-3"},Q={key:0,class:"invalid-feedback"},W={class:"mb-3"},X={key:0,class:"invalid-feedback"},Y={class:"col-md-6"},Z={class:"mb-3"},$={key:0,class:"invalid-feedback"},oo={class:"mb-3"},to={key:0,class:"invalid-feedback"},ao={class:"mb-3"},no={key:0,class:"invalid-feedback"},lo={class:"mb-3"},so={key:0,class:"invalid-feedback"},eo={class:"col-md-6"},io={class:"mb-3"},ro={key:0,class:"invalid-feedback"},co={class:"mb-3"},_o={key:0,class:"invalid-feedback"},bo={key:1,class:"mt-2"},mo=["src"],vo={class:"mb-3"},fo={key:0,class:"invalid-feedback"},ko={class:"mt-4"},go=["disabled"],uo=["disabled"],yo={class:"modal-dialog"},xo={class:"modal-content"},Do={class:"modal-header"},wo={class:"modal-body"},Mo={class:"modal-footer"};function ho(k,t,w,o,m,f){const v=x("Sidebar"),g=x("Navbar"),u=x("Footer");return l(),s(U,null,[a("div",L,[D(v),a("div",P,[D(g),a("div",p,[a("div",A,[a("div",E,[a("div",R,[a("div",T,[t[31]||(t[31]=a("h4",{class:"card-title mb-4"},"新增橫幅",-1)),a("form",{onSubmit:t[13]||(t[13]=C((...n)=>o.addBanner&&o.addBanner(...n),["prevent"])),enctype:"multipart/form-data",class:"w-100"},[a("div",z,[a("div",q,[a("div",G,[t[17]||(t[17]=a("label",{for:"title",class:"form-label"},"標題",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.title}]),id:"title","onUpdate:modelValue":t[0]||(t[0]=n=>o.bannerData.title=n)},null,2),[[_,o.bannerData.title]]),o.errors.title?(l(),s("div",H,e(o.errors.title.join(", ")),1)):i("",!0)]),a("div",J,[t[18]||(t[18]=a("label",{for:"subtitle_1",class:"form-label"},"副標題1",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.subtitle_1}]),id:"subtitle_1","onUpdate:modelValue":t[1]||(t[1]=n=>o.bannerData.subtitle_1=n)},null,2),[[_,o.bannerData.subtitle_1]]),o.errors.subtitle_1?(l(),s("div",K,e(o.errors.subtitle_1.join(", ")),1)):i("",!0)]),a("div",O,[t[19]||(t[19]=a("label",{for:"subtitle_2",class:"form-label"},"副標題2",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.subtitle_2}]),id:"subtitle_2","onUpdate:modelValue":t[2]||(t[2]=n=>o.bannerData.subtitle_2=n)},null,2),[[_,o.bannerData.subtitle_2]]),o.errors.subtitle_2?(l(),s("div",Q,e(o.errors.subtitle_2.join(", ")),1)):i("",!0)]),a("div",W,[t[20]||(t[20]=a("label",{for:"content",class:"form-label"},"內容",-1)),c(a("textarea",{class:r(["form-control",{"is-invalid":o.errors.content}]),id:"content","onUpdate:modelValue":t[3]||(t[3]=n=>o.bannerData.content=n)},null,2),[[_,o.bannerData.content]]),o.errors.content?(l(),s("div",X,e(o.errors.content.join(", ")),1)):i("",!0)])]),a("div",Y,[a("div",Z,[t[21]||(t[21]=a("label",{for:"action_link_href",class:"form-label"},"行動連結網址",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.action_link_href}]),id:"action_link_href","onUpdate:modelValue":t[4]||(t[4]=n=>o.bannerData.action_link_href=n)},null,2),[[_,o.bannerData.action_link_href]]),o.errors.action_link_href?(l(),s("div",$,e(o.errors.action_link_href.join(", ")),1)):i("",!0)]),a("div",oo,[t[22]||(t[22]=a("label",{for:"action_link_text",class:"form-label"},"行動連結文字",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.action_link_text}]),id:"action_link_text","onUpdate:modelValue":t[5]||(t[5]=n=>o.bannerData.action_link_text=n)},null,2),[[_,o.bannerData.action_link_text]]),o.errors.action_link_text?(l(),s("div",to,e(o.errors.action_link_text.join(", ")),1)):i("",!0)]),a("div",ao,[t[23]||(t[23]=a("label",{for:"action_link2_href",class:"form-label"},"行動連結2網址",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.action_link2_href}]),id:"action_link2_href","onUpdate:modelValue":t[6]||(t[6]=n=>o.bannerData.action_link2_href=n)},null,2),[[_,o.bannerData.action_link2_href]]),o.errors.action_link2_href?(l(),s("div",no,e(o.errors.action_link2_href.join(", ")),1)):i("",!0)]),a("div",lo,[t[24]||(t[24]=a("label",{for:"action_link2_text",class:"form-label"},"行動連結2文字",-1)),c(a("input",{type:"text",class:r(["form-control",{"is-invalid":o.errors.action_link2_text}]),id:"action_link2_text","onUpdate:modelValue":t[7]||(t[7]=n=>o.bannerData.action_link2_text=n)},null,2),[[_,o.bannerData.action_link2_text]]),o.errors.action_link2_text?(l(),s("div",so,e(o.errors.action_link2_text.join(", ")),1)):i("",!0)])]),a("div",eo,[a("div",io,[t[26]||(t[26]=a("label",{for:"status",class:"form-label"},"狀態",-1)),c(a("select",{class:r(["form-select",{"is-invalid":o.errors.status}]),id:"status","onUpdate:modelValue":t[8]||(t[8]=n=>o.bannerData.status=n)},t[25]||(t[25]=[a("option",{value:"active"},"啟用",-1),a("option",{value:"inactive"},"未啟用",-1)]),2),[[V,o.bannerData.status]]),o.errors.status?(l(),s("div",ro,e(o.errors.status.join(", ")),1)):i("",!0)]),a("div",co,[t[28]||(t[28]=a("label",{for:"image",class:"form-label"},"圖片",-1)),a("input",{type:"file",class:r(["form-control",{"is-invalid":o.errors.image}]),id:"image",onChange:t[9]||(t[9]=(...n)=>o.handleImageChange&&o.handleImageChange(...n)),accept:".jpg,.jpeg,.gif,.png,.webp"},null,34),t[29]||(t[29]=a("small",{class:"form-text text-muted"},"只能上傳 jpg、jpeg、gif、png 或 webp 格式的圖片",-1)),o.errors.image?(l(),s("div",_o,e(o.errors.image.join(", ")),1)):i("",!0),o.imagePreview?(l(),s("div",bo,[a("img",{src:o.imagePreview,alt:"Banner Preview",class:"img-fluid",style:{"max-width":"200px"}},null,8,mo),t[27]||(t[27]=a("br",null,null,-1)),a("button",{type:"button",class:"btn btn-sm btn-danger mt-2",onClick:t[10]||(t[10]=(...n)=>o.clearImage&&o.clearImage(...n))},"清除圖片")])):i("",!0)]),a("div",vo,[t[30]||(t[30]=a("label",{for:"sort",class:"form-label"},"排序",-1)),c(a("input",{type:"number",class:r(["form-control",{"is-invalid":o.errors.sort}]),id:"sort","onUpdate:modelValue":t[11]||(t[11]=n=>o.bannerData.sort=n)},null,2),[[_,o.bannerData.sort]]),o.errors.sort?(l(),s("div",fo,e(o.errors.sort.join(", ")),1)):i("",!0)])])]),a("div",ko,[a("button",{type:"submit",class:"btn btn-primary me-2",disabled:o.isLoading},e(o.isLoading?"新增中...":"新增橫幅"),9,go),a("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...n)=>o.goBack&&o.goBack(...n)),disabled:o.isLoading}," 返回 ",8,uo)])],32)])])])])]),D(u)])]),o.showModal?(l(),s("div",{key:0,class:"modal-backdrop",onClick:t[14]||(t[14]=(...n)=>o.closeModal&&o.closeModal(...n))})):i("",!0),a("div",{class:r(["modal",{"d-block":o.showModal}]),tabindex:"-1"},[a("div",yo,[a("div",xo,[a("div",Do,[t[32]||(t[32]=a("h5",{class:"modal-title"},"提示",-1)),a("button",{type:"button",class:"btn-close",onClick:t[15]||(t[15]=(...n)=>o.closeModal&&o.closeModal(...n))})]),a("div",wo,[a("p",null,e(o.modalMessage),1)]),a("div",Mo,[a("button",{type:"button",class:"btn btn-secondary",onClick:t[16]||(t[16]=(...n)=>o.closeModal&&o.closeModal(...n))},"關閉")])])])],2)],64)}const Fo=j(S,[["render",ho],["__scopeId","data-v-f8251dad"]]);export{Fo as default};
