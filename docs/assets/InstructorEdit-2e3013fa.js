import{_ as I,p as U,u as V,r as b,i as N,j as i,o as _,c as w,k as d,b as o,d as k,e as l,g as u,a as F,v as S,y as C,l as q}from"./index-7e071105.js";import{F as D,N as M,_ as R,a as x}from"./sidebar-bb7b1f1a.js";const h={components:{Footer:D,Navbar:M,Sidebar:R},setup(){const m=U(),t=V(),r=b(null),e=b(!1),n=b({}),f=async()=>{try{e.value=!0;const a=await x.getInstructor(t.params.id);n.value=a,n.value.photo&&(r.value=`${n.value.photo}`)}catch{alert("取得講師資料失敗"),m.push("/course/instructor")}finally{e.value=!1}},c=async()=>{e.value=!0;try{const a=new FormData;a.append("name",n.value.name),a.append("position",n.value.position),a.append("description",n.value.description),a.append("note",n.value.note),a.append("index_show",n.value.index_show),n.value.image instanceof File&&a.append("photo",n.value.image),await x.updateInstructor(t.params.id,a),m.push("/course/instructor")}catch(a){alert("更新失敗："+a.message)}finally{e.value=!1}},p=a=>{const s=a.target.files[0];if(s){n.value.image=s;const g=new FileReader;g.onload=y=>{r.value=y.target.result},g.readAsDataURL(s)}},v=()=>{n.value.image=null,r.value=null};return N(()=>{f()}),{instructor:n,imagePreview:r,handleImageUpload:p,removeImage:v,saveInstructor:c}}},B={class:"main-wrapper"},P={class:"page-wrapper"},j={class:"page-content"},E={class:"row mb-4"},T={class:"col-12 mx-auto stretch-card"},A={class:"card"},L={class:"card-body"},z={class:"mb-3"},G={class:"mb-3"},H={key:0,class:"mt-2"},J=["src"],K={class:"mb-3"},O={class:"mb-3"},Q={class:"mb-3"},W={class:"mb-3"},X={class:"d-flex justify-content-end"};function Y(m,t,r,e,n,f){const c=i("Sidebar"),p=i("Navbar"),v=i("router-link"),a=i("Footer");return _(),w("div",B,[d(c),o("div",P,[d(p),o("div",j,[o("div",E,[o("div",T,[o("div",A,[o("div",L,[t[17]||(t[17]=o("h6",{class:"card-title"},"編輯講師",-1)),o("form",{onSubmit:t[7]||(t[7]=k((...s)=>e.saveInstructor&&e.saveInstructor(...s),["prevent"]))},[o("div",z,[t[8]||(t[8]=o("label",{class:"form-label"},"講師名稱",-1)),l(o("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>e.instructor.name=s),required:""},null,512),[[u,e.instructor.name]])]),o("div",G,[t[9]||(t[9]=o("label",{class:"form-label"},"講師照片",-1)),o("input",{type:"file",class:"form-control",accept:"image/*",onChange:t[1]||(t[1]=(...s)=>e.handleImageUpload&&e.handleImageUpload(...s))},null,32),e.imagePreview?(_(),w("div",H,[o("img",{src:e.imagePreview,class:"img-thumbnail",style:{"max-width":"200px"}},null,8,J),o("button",{type:"button",class:"btn btn-sm btn-outline-danger ms-2",onClick:t[2]||(t[2]=(...s)=>e.removeImage&&e.removeImage(...s))}," 移除照片 ")])):F("",!0)]),o("div",K,[t[10]||(t[10]=o("label",{class:"form-label"},"職稱",-1)),l(o("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>e.instructor.position=s),required:""},null,512),[[u,e.instructor.position]])]),o("div",O,[t[11]||(t[11]=o("label",{class:"form-label"},"描述",-1)),l(o("textarea",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>e.instructor.description=s),rows:"4",required:""},null,512),[[u,e.instructor.description]])]),o("div",Q,[t[12]||(t[12]=o("label",{class:"form-label"},"備註",-1)),l(o("textarea",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>e.instructor.note=s),rows:"2"},null,512),[[u,e.instructor.note]])]),o("div",W,[t[14]||(t[14]=o("label",{class:"form-label"},"是否展示在首頁",-1)),l(o("select",{class:"form-select","onUpdate:modelValue":t[6]||(t[6]=s=>e.instructor.index_show=s),required:""},t[13]||(t[13]=[o("option",{value:"1"},"是",-1),o("option",{value:"0"},"否",-1)]),512),[[S,e.instructor.index_show]])]),o("div",X,[d(v,{to:"/course/instructor",class:"btn btn-secondary me-2"},{default:C(()=>t[15]||(t[15]=[q(" 取消 ")])),_:1}),t[16]||(t[16]=o("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])])])]),d(a)])])}const tt=I(h,[["render",Y]]);export{tt as default};
