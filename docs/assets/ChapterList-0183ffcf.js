import{_ as y,p as k,u as N,r as v,i as w,j as l,o as i,c as p,b as t,k as _,l as F,F as f,f as L,m as x,a as S,t as m,n as B}from"./index-9daaab36.js";import{F as V,N as $,_ as I,a as g}from"./sidebar-a960fed0.js";import{L as j}from"./loading-02e81e83.js";const R={components:{Footer:V,Navbar:$,Sidebar:I,Loading:j},setup(){const c=k(),s=N(),n=v([]),e=v(!1),b=()=>{c.push(`/course/${s.params.courseId}/chapter/add`)},h=a=>{c.push(`/course/${s.params.courseId}/chapter/${a}/edit`)},d=async a=>{if(confirm("確定要刪除此章節嗎？"))try{e.value=!0,await g.deleteChapter(s.params.courseId,a),n.value=n.value.filter(r=>r.id!==a),e.value=!1}catch{e.value=!1,alert("刪除章節失敗")}},u=async()=>{try{e.value=!0;const a=await g.getChapters(s.params.courseId);e.value=!1,n.value=a}catch(a){e.value=!1,alert("獲取課程列表失敗"),console.log(a)}};return w(()=>{u()}),{chapters:n,loading:e,addChapter:b,editChapter:h,deleteChapter:d}}},z={class:"main-wrapper"},D={class:"page-wrapper"},E={class:"page-content"},M={class:"row"},T={class:"col-md-12 grid-margin stretch-card"},q={class:"card"},A={class:"card-body"},G={class:"d-flex justify-content-between align-items-center mb-4"},H={class:"table-responsive"},J={class:"table table-hover"},K=["onClick"],O=["onClick"];function P(c,s,n,e,b,h){const d=l("Navbar"),u=l("Sidebar"),a=l("Footer"),r=l("Loading");return i(),p(f,null,[t("div",z,[_(d),_(u),t("div",D,[t("div",E,[t("div",M,[t("div",T,[t("div",q,[t("div",A,[t("div",G,[s[2]||(s[2]=t("h6",{class:"card-title mb-0"},"章節管理",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=(...o)=>e.addChapter&&e.addChapter(...o))},s[1]||(s[1]=[t("i",{class:"link-icon","data-feather":"plus"},null,-1),F(" 新增章節 ")]))]),t("div",H,[t("table",J,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"章節標題"),t("th",null,"狀態"),t("th",null,"新增日期"),t("th",null,"操作")])],-1)),t("tbody",null,[(i(!0),p(f,null,L(e.chapters,o=>(i(),p("tr",{key:o.id},[t("td",null,m(o.title),1),t("td",null,[t("span",{class:B({"badge bg-success":o.status==="publish","badge bg-warning":o.status==="unpublish"})},m(o.status=="publish"?"公開":"未公開"),3)]),t("td",null,m(o.created_at),1),t("td",null,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:C=>e.editChapter(o.id)}," 編輯 ",8,K),t("button",{class:"btn btn-sm btn-outline-danger",onClick:C=>e.deleteChapter(o.id)}," 刪除 ",8,O)])]))),128))])])])])])])])]),_(a)])]),e.loading?(i(),x(r,{key:0})):S("",!0)],64)}const X=y(R,[["render",P]]);export{X as default};
