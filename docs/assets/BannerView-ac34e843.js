import{_ as x,i as N,r as b,q as L,j as F,k as i,o,c as n,b as e,l as m,y as S,F as r,f,n as V,a as M,p as D,m as h,t as g}from"./index-e36c3218.js";import{a as w}from"./api-service-a37f4a4e.js";import{F as T,N as E,_ as H}from"./sidebar-f916acad.js";import{L as I}from"./loading-57945fd8.js";const j={components:{Footer:T,Navbar:E,Sidebar:H,Loading:I},setup(){N();const c=b(""),t=b(!1),v=b([]),s=b(!1),B=L([{key:"id",label:"編號"},{key:"title",label:"主要標題"},{key:"status",label:"狀態"},{key:"img_url",label:"圖片"},{key:"actions",label:"操作"}]),y=async()=>{try{s.value=!0;const l=await w.listBanners();v.value=l,s.value=!1}catch(l){console.error("獲取 Banner 列表時發生錯誤:",l)}},k=async l=>{try{confirm("確定要刪除此 Banner 嗎？")&&(s.value=!0,await w.deleteBanner(l),await y(),s.value=!1,u("Banner 已成功刪除"))}catch{_("刪除 Banner 時發生錯誤")}},_=l=>{c.value=l,t.value=!0},u=l=>{c.value=l,t.value=!0},p=()=>{t.value=!1};return F(()=>{y()}),{tableData:v,tableColumns:B,deleteBanner:k,showErrorModal:_,showSuccessModal:u,closeModal:p,modalMessage:c,showModal:t,loading:s}}},q={class:"main-wrapper"},z={class:"page-wrapper"},R={class:"page-content"},A={class:"row mb-3"},G={class:"col-12 text-end"},J={class:"row"},K={class:"col-12 stretch-card"},O={class:"card"},P={class:"card-body"},Q={class:"table-responsive"},U={class:"table"},W=["src"],X=["href"],Y=["onClick"],Z={class:"modal-dialog"},$={class:"modal-content"},ee={class:"modal-header"},te=["innerHTML"],se={class:"modal-footer"},ae={key:0,class:"modal-backdrop"};function oe(c,t,v,s,B,y){const k=i("Sidebar"),_=i("Navbar"),u=i("router-link"),p=i("Footer"),l=i("Loading");return o(),n(r,null,[e("div",q,[m(k),e("div",z,[m(_),e("div",R,[e("div",A,[e("div",G,[m(u,{to:"/layout/banner/add",class:"btn btn-primary"},{default:S(()=>t[2]||(t[2]=[h("新增Banner")])),_:1})])]),e("div",J,[e("div",K,[e("div",O,[e("div",P,[t[5]||(t[5]=e("h6",{class:"card-title"},"Banner列表",-1)),e("div",Q,[e("table",U,[e("thead",null,[e("tr",null,[(o(!0),n(r,null,f(s.tableColumns,a=>(o(),n("th",{key:a.key},g(a.label),1))),128))])]),e("tbody",null,[(o(!0),n(r,null,f(s.tableData,(a,C)=>(o(),n("tr",{key:C},[(o(!0),n(r,null,f(s.tableColumns,d=>(o(),n("td",{key:d.key},[d.key==="img_url"?(o(),n("img",{key:0,src:a.img_url,alt:"Banner Image",class:"img-fluid rounded-0",style:{"max-width":"100px"}},null,8,W)):d.key==="actions"?(o(),n(r,{key:1},[e("a",{href:`/layout/banner/edit/${a.id}`,class:"btn btn-link p-0 me-2"},t[3]||(t[3]=[e("i",{class:"material-icons"},"edit",-1)]),8,X),e("button",{onClick:ne=>s.deleteBanner(a.id),class:"btn btn-link p-0"},t[4]||(t[4]=[e("i",{class:"material-icons"},"delete",-1)]),8,Y)],64)):d.key==="status"?(o(),n(r,{key:2},[h(g(a.status==="active"?"啟用":"未啟用"),1)],64)):(o(),n(r,{key:3},[h(g(a[d.key]),1)],64))]))),128))]))),128))])])])])])])])]),m(p)])]),e("div",{class:V(["modal",{"d-block":s.showModal}]),tabindex:"-1"},[e("div",Z,[e("div",$,[e("div",ee,[t[6]||(t[6]=e("h5",{class:"modal-title"},"提示",-1)),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...a)=>s.closeModal&&s.closeModal(...a))})]),e("div",{class:"modal-body",innerHTML:s.modalMessage},null,8,te),e("div",se,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...a)=>s.closeModal&&s.closeModal(...a))}," 關閉 ")])])])],2),s.showModal?(o(),n("div",ae)):M("",!0),s.loading?(o(),D(l,{key:1})):M("",!0)],64)}const ce=x(j,[["render",oe],["__scopeId","data-v-8d707e0e"]]);export{ce as default};
