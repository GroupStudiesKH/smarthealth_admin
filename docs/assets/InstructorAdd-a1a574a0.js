import{_ as w,p as x,u as y,r as c,j as i,o as b,c as f,k as d,b as t,d as I,e as r,g as m,a as U,v as V,y as N,l as k}from"./index-2efd86e2.js";import{F,N as S,_ as q,a as C}from"./sidebar-b1a3548c.js";const D={components:{Footer:F,Navbar:S,Sidebar:q},setup(){const v=x();y();const e=c(null),u=c(!1),o=c({name:"",title:"",description:"",index_show:0,note:"",image:null});return{instructor:o,imagePreview:e,handleImageUpload:n=>{const a=n.target.files[0];if(a){o.value.image=a;const l=new FileReader;l.onload=s=>{e.value=s.target.result},l.readAsDataURL(a)}},removeImage:()=>{o.value.image=null,e.value=null},saveInstructor:async()=>{u.value=!0;try{const n=new FormData;n.append("name",o.value.name),n.append("position",o.value.title),n.append("description",o.value.description),n.append("note",o.value.note),n.append("index_show",o.value.index_show),o.value.image instanceof File&&n.append("photo",o.value.image),await C.addInstructor(n),v.push("/course/instructor")}catch(n){alert("更新失敗："+n.message)}finally{u.value=!1}}}}},R={class:"main-wrapper"},B={class:"page-wrapper"},M={class:"page-content"},P={class:"row mb-4"},j={class:"col-12 mx-auto stretch-card"},A={class:"card"},T={class:"card-body"},h={class:"mb-3"},E={class:"mb-3"},L={key:0,class:"mt-2"},z=["src"],G={class:"mb-3"},H={class:"mb-3"},J={class:"mb-3"},K={class:"mb-3"},O={class:"d-flex justify-content-end"};function Q(v,e,u,o,g,_){const p=i("Sidebar"),n=i("Navbar"),a=i("router-link"),l=i("Footer");return b(),f("div",R,[d(p),t("div",B,[d(n),t("div",M,[t("div",P,[t("div",j,[t("div",A,[t("div",T,[e[17]||(e[17]=t("h6",{class:"card-title"},"新增講師",-1)),t("form",{onSubmit:e[7]||(e[7]=I((...s)=>o.saveInstructor&&o.saveInstructor(...s),["prevent"]))},[t("div",h,[e[8]||(e[8]=t("label",{class:"form-label"},"講師名稱",-1)),r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>o.instructor.name=s),required:""},null,512),[[m,o.instructor.name]])]),t("div",E,[e[9]||(e[9]=t("label",{class:"form-label"},"講師照片",-1)),t("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[1]||(e[1]=(...s)=>o.handleImageUpload&&o.handleImageUpload(...s)),required:""},null,32),o.imagePreview?(b(),f("div",L,[t("img",{src:o.imagePreview,class:"img-thumbnail",style:{"max-width":"200px"}},null,8,z),t("button",{type:"button",class:"btn btn-sm btn-outline-danger ms-2",onClick:e[2]||(e[2]=(...s)=>o.removeImage&&o.removeImage(...s))}," 移除照片 ")])):U("",!0)]),t("div",G,[e[10]||(e[10]=t("label",{class:"form-label"},"職稱",-1)),r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=s=>o.instructor.title=s),required:""},null,512),[[m,o.instructor.title]])]),t("div",H,[e[11]||(e[11]=t("label",{class:"form-label"},"描述",-1)),r(t("textarea",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=s=>o.instructor.description=s),rows:"4",required:""},null,512),[[m,o.instructor.description]])]),t("div",J,[e[12]||(e[12]=t("label",{class:"form-label"},"備註",-1)),r(t("textarea",{class:"form-control","onUpdate:modelValue":e[5]||(e[5]=s=>o.instructor.note=s),rows:"2"},null,512),[[m,o.instructor.note]])]),t("div",K,[e[14]||(e[14]=t("label",{class:"form-label"},"是否展示在首頁",-1)),r(t("select",{class:"form-select","onUpdate:modelValue":e[6]||(e[6]=s=>o.instructor.index_show=s),required:""},e[13]||(e[13]=[t("option",{value:"1"},"是",-1),t("option",{value:"0"},"否",-1)]),512),[[V,o.instructor.index_show]])]),t("div",O,[d(a,{to:"/course/instructor",class:"btn btn-secondary me-2"},{default:N(()=>e[15]||(e[15]=[k(" 取消 ")])),_:1}),e[16]||(e[16]=t("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])])])]),d(l)])])}const Y=w(D,[["render",Q]]);export{Y as default};
