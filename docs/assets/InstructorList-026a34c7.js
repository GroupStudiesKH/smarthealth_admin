import{_ as N,r as o,i as F,j as g,o as d,c as i,b as t,k as m,y as P,e as w,g as V,F as k,f as I,n as C,d as x,a as L,l as M,t as v,G as j}from"./index-20bcdf47.js";import{F as B,N as D,_ as Q,a as S}from"./sidebar-d8a107a2.js";const T={components:{Footer:B,Navbar:D,Sidebar:Q},setup(){const p=o([]),e=o(!1),c=o({current_page:1,total:0,per_page:10}),s=o(""),l=o(1),h=o(0),b=o(""),f=()=>{l.value=1,r()},_=n=>{b.value=n},y=()=>{S.delInstructor(b.value).then(n=>{r(),$("#delConfirmModal").modal("hide")}).catch(n=>{console.error("刪除講師失敗:",n)})},a=n=>{l.value=n,r()},r=async()=>{try{e.value=!0;const n=await S.getInstructors({page:l.value,per_page:c.value.per_page,search:s.value});p.value=n.data.map(u=>({id:u.id,name:u.name,note:u.note,created_at:u.created_at,index_show:u.index_show})),c.value.total=n.pagination.total,c.value.per_page=n.pagination.per_page,h.value=n.pagination.last_page,l.value=n.pagination.current_page,e.value=!1}catch(n){console.error("獲取講師列表失敗:",n)}};return F(()=>{r()}),{instructors:p,loading:e,searchQuery:s,handleSearch:f,currentPage:l,totalPages:h,deleteInstructor:_,changePage:a,pagination:c,delInstructor:y}}},z={class:"main-wrapper"},E={class:"page-wrapper"},G={class:"page-content"},U={class:"row"},q={class:"col-md-12 grid-margin stretch-card"},A={class:"card"},H={class:"card-body"},J={class:"d-flex justify-content-between align-items-center mb-4"},K={class:"row mb-4"},O={class:"col-md-4"},R={class:"input-group"},W={class:"table-responsive"},X={class:"table table-hover"},Y=["onClick"],Z={class:"mt-4 d-flex justify-content-center"},tt={class:"pagination"},et=["onClick"],at={class:"modal fade",id:"delConfirmModal",tabindex:"-1","aria-labelledby":"delConfirmModalLabel","aria-hidden":"true"},st={class:"modal-dialog"},nt={class:"modal-content"},ot={class:"modal-footer"},lt={key:0,class:"loading-overlay"};function rt(p,e,c,s,l,h){const b=g("Sidebar"),f=g("Navbar"),_=g("router-link"),y=g("Footer");return d(),i(k,null,[t("div",z,[m(b),t("div",E,[m(f),t("div",G,[t("div",U,[t("div",q,[t("div",A,[t("div",H,[t("div",J,[e[6]||(e[6]=t("h6",{class:"card-title mb-0"},"講師列表",-1)),m(_,{to:"/course/instructor/add",class:"btn btn-primary"},{default:P(()=>e[5]||(e[5]=[M(" 新增講師 ")])),_:1})]),t("div",K,[t("div",O,[t("div",R,[w(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>s.searchQuery=a),placeholder:"搜尋講師名稱"},null,512),[[V,s.searchQuery]]),t("button",{class:"btn btn-primary",type:"button",onClick:e[1]||(e[1]=(...a)=>s.handleSearch&&s.handleSearch(...a))}," 搜尋 ")])])]),t("div",W,[t("table",X,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"講師名稱"),t("th",null,"備註"),t("th",null,"展示在首頁"),t("th",null,"新增日期"),t("th",null,"操作")])],-1)),t("tbody",null,[(d(!0),i(k,null,I(s.instructors,a=>(d(),i("tr",{key:a.id},[t("td",null,v(a.name),1),t("td",null,v(a.note),1),t("td",null,v(a.index_show?"是":"否"),1),t("td",null,v(a.created_at),1),t("td",null,[m(_,{to:`/course/instructor/edit/${a.id}`,class:"btn btn-sm btn-outline-primary me-2"},{default:P(()=>e[7]||(e[7]=[M(" 編輯 ")])),_:2},1032,["to"]),t("button",{class:"btn btn-sm btn-outline-danger",onClick:r=>s.deleteInstructor(a.id),"data-bs-toggle":"modal","data-bs-target":"#delConfirmModal"}," 刪除 ",8,Y)])]))),128))])])]),t("nav",Z,[t("ul",tt,[t("li",{class:C(["page-item",{disabled:s.currentPage===1}])},[t("a",{class:"page-link",href:"#",onClick:e[2]||(e[2]=x(a=>s.changePage(s.currentPage),["prevent"]))}," 上一頁 ")],2),(d(!0),i(k,null,I(s.totalPages,a=>w((d(),i("li",{key:a,class:C(["page-item",{active:s.currentPage===a}])},[t("a",{class:"page-link",href:"#",onClick:x(r=>s.changePage(a),["prevent"])},v(a),9,et)],2)),[[j,Math.abs(a-s.pagination.current_page)<=2||a===1||a===s.totalPages]])),128)),t("li",{class:C(["page-item",{disabled:s.currentPage===s.totalPages}])},[t("a",{class:"page-link",href:"#",onClick:e[3]||(e[3]=x(a=>s.changePage(s.currentPage+1),["prevent"]))}," 下一頁 ")],2)])])])])])])]),t("div",at,[t("div",st,[t("div",nt,[e[10]||(e[10]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"delConfirmModalLabel"},"確認刪除？"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"btn-close"})],-1)),e[11]||(e[11]=t("div",{class:"modal-body"},"請確認是否刪除",-1)),t("div",ot,[e[9]||(e[9]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=a=>s.delInstructor())}," 確認 ")])])])]),m(y)])]),s.loading?(d(),i("div",lt,e[12]||(e[12]=[t("div",{class:"loading-spinner"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"載入中...")]),t("div",{class:"mt-2"},"載入中...")],-1)]))):L("",!0)],64)}const ct=N(T,[["render",rt]]);export{ct as default};
