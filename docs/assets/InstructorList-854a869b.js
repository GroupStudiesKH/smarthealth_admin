import{_ as L,r as s,j as N,k as c,o as r,c as u,b as t,l as m,y as w,e as x,g as F,F as k,f as I,n as C,d as P,p as V,a as B,m as M,t as _,G as j}from"./index-955d0ec7.js";import{F as D,N as Q,_ as T}from"./sidebar-0f1fc19f.js";import{L as z}from"./loading-3ea249f0.js";import{a as S}from"./api-service-28558cf5.js";const E={components:{Footer:D,Navbar:Q,Sidebar:T,Loading:z},setup(){const v=s([]),e=s(!1),d=s({current_page:1,total:0,per_page:10}),o=s(""),l=s(1),p=s(0),b=s(""),h=()=>{l.value=1,a()},g=n=>{b.value=n},f=()=>{S.delInstructor(b.value).then(n=>{a(),$("#delConfirmModal").modal("hide")}).catch(n=>{console.error("刪除講師失敗:",n)})},y=n=>{l.value=n,a()},a=async()=>{try{e.value=!0;const n=await S.getInstructors({page:l.value,per_page:d.value.per_page,search:o.value});v.value=n.data.map(i=>({id:i.id,name:i.name,note:i.note,created_at:i.created_at,index_show:i.index_show})),d.value.total=n.pagination.total,d.value.per_page=n.pagination.per_page,p.value=n.pagination.last_page,l.value=n.pagination.current_page,e.value=!1}catch(n){console.error("獲取講師列表失敗:",n)}};return N(()=>{a()}),{instructors:v,loading:e,searchQuery:o,handleSearch:h,currentPage:l,totalPages:p,deleteInstructor:g,changePage:y,pagination:d,delInstructor:f}}},G={class:"main-wrapper"},U={class:"page-wrapper"},q={class:"page-content"},A={class:"row"},H={class:"col-md-12 grid-margin stretch-card"},J={class:"card"},K={class:"card-body"},O={class:"d-flex justify-content-between align-items-center mb-4"},R={class:"row mb-4"},W={class:"col-md-4"},X={class:"input-group"},Y={class:"table-responsive"},Z={class:"table table-hover"},tt=["onClick"],et={class:"mt-4 d-flex justify-content-center"},at={class:"pagination"},ot=["onClick"],nt={class:"modal fade",id:"delConfirmModal",tabindex:"-1","aria-labelledby":"delConfirmModalLabel","aria-hidden":"true"},st={class:"modal-dialog"},lt={class:"modal-content"},rt={class:"modal-footer"};function dt(v,e,d,o,l,p){const b=c("Sidebar"),h=c("Navbar"),g=c("router-link"),f=c("Footer"),y=c("Loading");return r(),u(k,null,[t("div",G,[m(b),t("div",U,[m(h),t("div",q,[t("div",A,[t("div",H,[t("div",J,[t("div",K,[t("div",O,[e[6]||(e[6]=t("h6",{class:"card-title mb-0"},"講師列表",-1)),m(g,{to:"/course/instructor/add",class:"btn btn-primary"},{default:w(()=>e[5]||(e[5]=[M(" 新增講師 ")])),_:1})]),t("div",R,[t("div",W,[t("div",X,[x(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>o.searchQuery=a),placeholder:"搜尋講師名稱"},null,512),[[F,o.searchQuery]]),t("button",{class:"btn btn-primary",type:"button",onClick:e[1]||(e[1]=(...a)=>o.handleSearch&&o.handleSearch(...a))}," 搜尋 ")])])]),t("div",Y,[t("table",Z,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"講師名稱"),t("th",null,"備註"),t("th",null,"展示在首頁"),t("th",null,"新增日期"),t("th",null,"操作")])],-1)),t("tbody",null,[(r(!0),u(k,null,I(o.instructors,a=>(r(),u("tr",{key:a.id},[t("td",null,_(a.name),1),t("td",null,_(a.note),1),t("td",null,_(a.index_show?"是":"否"),1),t("td",null,_(a.created_at),1),t("td",null,[m(g,{to:`/course/instructor/edit/${a.id}`,class:"btn btn-sm btn-outline-primary me-2"},{default:w(()=>e[7]||(e[7]=[M(" 編輯 ")])),_:2},1032,["to"]),t("button",{class:"btn btn-sm btn-outline-danger",onClick:n=>o.deleteInstructor(a.id),"data-bs-toggle":"modal","data-bs-target":"#delConfirmModal"}," 刪除 ",8,tt)])]))),128))])])]),t("nav",et,[t("ul",at,[t("li",{class:C(["page-item",{disabled:o.currentPage===1}])},[t("a",{class:"page-link",href:"#",onClick:e[2]||(e[2]=P(a=>o.changePage(o.currentPage),["prevent"]))}," 上一頁 ")],2),(r(!0),u(k,null,I(o.totalPages,a=>x((r(),u("li",{key:a,class:C(["page-item",{active:o.currentPage===a}])},[t("a",{class:"page-link",href:"#",onClick:P(n=>o.changePage(a),["prevent"])},_(a),9,ot)],2)),[[j,Math.abs(a-o.pagination.current_page)<=2||a===1||a===o.totalPages]])),128)),t("li",{class:C(["page-item",{disabled:o.currentPage===o.totalPages}])},[t("a",{class:"page-link",href:"#",onClick:e[3]||(e[3]=P(a=>o.changePage(o.currentPage+1),["prevent"]))}," 下一頁 ")],2)])])])])])])]),t("div",nt,[t("div",st,[t("div",lt,[e[10]||(e[10]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"delConfirmModalLabel"},"確認刪除？"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"btn-close"})],-1)),e[11]||(e[11]=t("div",{class:"modal-body"},"請確認是否刪除",-1)),t("div",rt,[e[9]||(e[9]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 關閉 ",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=a=>o.delInstructor())}," 確認 ")])])])]),m(f)])]),o.loading?(r(),V(y,{key:0})):B("",!0)],64)}const _t=L(E,[["render",dt]]);export{_t as default};
