import{_ as V,i as x,r as m,j as F,k as y,o as i,c as l,l as g,b as a,d as N,e as _,g as p,n as c,t,a as n,v as S,F as q,f as A}from"./index-a7a449ec.js";import{F as C,N as U,_ as L}from"./sidebar-071cb7ef.js";const T={components:{Footer:C,Navbar:U,Sidebar:L},setup(){const k=x(),o=m([]),d=m({name:"",email:"",permission_group_id:"",password:"",password_confirmation:""}),s=m(!1),f=m(""),b=m(""),e=m({}),w=()=>(e.value={},d.value.name.trim()||(e.value.name=["請填寫姓名"]),d.value.email.trim()||(e.value.email=["請填寫電子郵件"]),d.value.permission_group_id||(e.value.permission_group_id=["請選擇權限群組"]),d.value.password||(e.value.password=["請輸入密碼"]),d.value.password!==d.value.password_confirmation&&(e.value.password=["兩次輸入的密碼不一致"]),Object.keys(e.value).length===0),u=(v,h)=>{b.value=v,f.value=h,s.value=!0},r=()=>{s.value=!1},M=async()=>{try{const v=[{id:1,name:"超級管理員"},{id:2,name:"內容管理員"},{id:3,name:"一般管理員"}];o.value=v}catch(v){console.error("Error fetching permission list:",v),u("錯誤","獲取權限列表失敗，請再試一次")}},D=()=>{w()&&setTimeout(()=>{u("成功","管理員已成功新增"),k.push("/admins")},500)};return F(()=>{M()}),{userData:d,registerAdmin:D,permissionList:o,showModal:s,modalMessage:f,modalTitle:b,closeModal:r,errors:e}}},B={class:"main-wrapper"},j={class:"page-wrapper"},E={class:"page-content"},P={class:"row mb-4"},z={class:"col-12 col-lg-8 mx-auto stretch-card"},O={class:"card"},R={class:"card-body"},G={class:"mb-3"},H={key:0,class:"invalid-feedback"},I={class:"mb-3"},J={key:0,class:"invalid-feedback"},K={class:"mb-3"},Q=["value"],W={key:0,class:"invalid-feedback"},X={class:"mb-3"},Y={key:0,class:"invalid-feedback"},Z={class:"mb-3"},$={key:0,class:"invalid-feedback"},ss={class:"modal-dialog"},os={class:"modal-content"},as={class:"modal-header"},rs={class:"modal-title"},es={class:"modal-body"},is={class:"modal-footer"},ls={key:1,class:"modal-backdrop fade show"};function ds(k,o,d,s,f,b){const e=y("Sidebar"),w=y("Navbar"),u=y("Footer");return i(),l("div",B,[g(e),a("div",j,[g(w),a("div",E,[a("div",P,[a("div",z,[a("div",O,[a("div",R,[o[15]||(o[15]=a("h6",{class:"card-title"},"新增管理員",-1)),a("form",{onSubmit:o[5]||(o[5]=N((...r)=>s.registerAdmin&&s.registerAdmin(...r),["prevent"]))},[a("div",G,[o[8]||(o[8]=a("label",{for:"name",class:"form-label"},"姓名",-1)),_(a("input",{type:"text",class:c(["form-control",{"is-invalid":s.errors.name}]),id:"name","onUpdate:modelValue":o[0]||(o[0]=r=>s.userData.name=r),required:""},null,2),[[p,s.userData.name]]),s.errors.name?(i(),l("div",H,t(s.errors.name[0]),1)):n("",!0)]),a("div",I,[o[9]||(o[9]=a("label",{for:"email",class:"form-label"},"電子郵件",-1)),_(a("input",{type:"email",class:c(["form-control",{"is-invalid":s.errors.email}]),id:"email","onUpdate:modelValue":o[1]||(o[1]=r=>s.userData.email=r),required:""},null,2),[[p,s.userData.email]]),s.errors.email?(i(),l("div",J,t(s.errors.email[0]),1)):n("",!0)]),a("div",K,[o[11]||(o[11]=a("label",{for:"permission_group_id",class:"form-label"},"權限群組",-1)),_(a("select",{class:c(["form-select",{"is-invalid":s.errors.permission_group_id}]),id:"permission_group_id","onUpdate:modelValue":o[2]||(o[2]=r=>s.userData.permission_group_id=r),required:""},[o[10]||(o[10]=a("option",{value:""},"請選擇權限群組",-1)),(i(!0),l(q,null,A(s.permissionList,r=>(i(),l("option",{key:r.id,value:r.id},t(r.name),9,Q))),128))],2),[[S,s.userData.permission_group_id]]),s.errors.permission_group_id?(i(),l("div",W,t(s.errors.permission_group_id[0]),1)):n("",!0)]),a("div",X,[o[12]||(o[12]=a("label",{for:"password",class:"form-label"},"密碼",-1)),_(a("input",{type:"password",class:c(["form-control",{"is-invalid":s.errors.password}]),id:"password","onUpdate:modelValue":o[3]||(o[3]=r=>s.userData.password=r),required:""},null,2),[[p,s.userData.password]]),s.errors.password?(i(),l("div",Y,t(s.errors.password[0]),1)):n("",!0)]),a("div",Z,[o[13]||(o[13]=a("label",{for:"password_confirmation",class:"form-label"},"確認密碼",-1)),_(a("input",{type:"password",class:c(["form-control",{"is-invalid":s.errors.password}]),id:"password_confirmation","onUpdate:modelValue":o[4]||(o[4]=r=>s.userData.password_confirmation=r),required:""},null,2),[[p,s.userData.password_confirmation]]),s.errors.password?(i(),l("div",$,t(s.errors.password[0]),1)):n("",!0)]),o[14]||(o[14]=a("button",{type:"submit",class:"btn btn-primary"},"新增管理員",-1))],32)])])])]),s.showModal?(i(),l("div",{key:0,class:c(["modal fade",{show:s.showModal}]),tabindex:"-1",style:{display:"block"}},[a("div",ss,[a("div",os,[a("div",as,[a("h5",rs,t(s.modalTitle),1),a("button",{type:"button",class:"btn-close",onClick:o[6]||(o[6]=(...r)=>s.closeModal&&s.closeModal(...r))})]),a("div",es,[a("p",null,t(s.modalMessage),1)]),a("div",is,[a("button",{type:"button",class:"btn btn-secondary",onClick:o[7]||(o[7]=(...r)=>s.closeModal&&s.closeModal(...r))},"關閉")])])])],2)):n("",!0),s.showModal?(i(),l("div",ls)):n("",!0)]),g(u)])])}const ms=V(T,[["render",ds]]);export{ms as default};
