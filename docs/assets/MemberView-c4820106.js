import{_ as V,p as x,r as h,q as M,s as z,l as p,o as l,c as r,m as f,a as e,h as D,d as R,f as A,D as E,F as S,e as w,n as d,b as C,j,t as i}from"./index-2084911f.js";import{F as B,N as G,_ as K,a as L}from"./sidebar-d4d14e1c.js";const q={components:{Footer:B,Navbar:G,Sidebar:K},setup(){const b=x(),s=h([]),u=h(0),t=h(1),g=h(10),v=M({keyword:""}),_=()=>{t.value=1,o()},k=()=>{v.keyword="",t.value=1,o()},y=n=>{t.value=n,o()},a=M([{key:"id",label:"編號"},{key:"name",label:"會員名稱"},{key:"email",label:"Email帳號"},{key:"created_at",label:"註冊日期"},{key:"status",label:"狀態"},{key:"actions",label:"操作"}]),o=async()=>{try{const n={data:Array(10).fill(null).map((m,c)=>({id:c+1+(t.value-1)*g.value,name:`測試會員${c+1}`,email:`test${c+1}@example.com`,created_at:new Date(Date.now()-Math.random()*1e10).toISOString(),status:Math.random()>.3})),recordsTotal:50};await new Promise(m=>setTimeout(m,500)),s.value=n.data,u.value=n.recordsTotal}catch(n){console.error("Failed to fetch member data:",n)}},F=n=>{b.push(`/member/edit/${n}`)},P=async(n,m)=>{try{await L.toggleMemberStatus(n,!m),o()}catch(c){console.error("Failed to toggle member status:",c)}},N=n=>{b.push(`/member/grades/${n}`)},T=()=>{b.push("/member/add")};return z(()=>{o()}),{tableData:s,tableColumns:a,totalRecords:u,currentPage:t,pageSize:g,searchForm:v,handleSearch:_,resetSearch:k,handlePageChange:y,handleEdit:F,handleToggleStatus:P,handleViewGrades:N,handleAddMember:T}}},I={class:"main-wrapper"},O={class:"page-wrapper"},U={class:"page-content"},H={class:"row"},J={class:"col-md-12 grid-margin stretch-card"},Q={class:"card"},W={class:"card-body"},X={class:"d-flex justify-content-between align-items-center mb-3"},Y={class:"row mb-3"},Z={class:"col-md-6"},$={class:"input-group"},ee={class:"table-responsive"},te={class:"table table-hover"},ae=["onClick"],se=["onClick"],ne={class:"material-icons"},oe=["onClick"],le={key:0,class:"mt-3"},re={class:"pagination justify-content-center"},ie=["onClick"];function ce(b,s,u,t,g,v){const _=p("Sidebar"),k=p("Navbar"),y=p("Footer");return l(),r("div",I,[f(_),e("div",O,[f(k),e("div",U,[e("div",H,[e("div",J,[e("div",Q,[e("div",W,[e("div",X,[s[8]||(s[8]=e("h6",{class:"card-title mb-0"},"會員列表",-1)),e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...a)=>t.handleAddMember&&t.handleAddMember(...a))},s[7]||(s[7]=[e("i",{class:"material-icons"},"add",-1),D(" 新增會員 ")]))]),e("div",Y,[e("div",Z,[e("div",$,[R(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=a=>t.searchForm.keyword=a),placeholder:"搜尋會員...",onKeyup:s[2]||(s[2]=E((...a)=>t.handleSearch&&t.handleSearch(...a),["enter"]))},null,544),[[A,t.searchForm.keyword]]),e("button",{class:"btn btn-outline-primary",type:"button",onClick:s[3]||(s[3]=(...a)=>t.handleSearch&&t.handleSearch(...a))},s[9]||(s[9]=[e("i",{class:"material-icons"},"search",-1)])),e("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[4]||(s[4]=(...a)=>t.resetSearch&&t.resetSearch(...a))},s[10]||(s[10]=[e("i",{class:"material-icons"},"refresh",-1)]))])])]),e("div",ee,[e("table",te,[e("thead",null,[e("tr",null,[(l(!0),r(S,null,w(t.tableColumns,a=>(l(),r("th",{key:a.key},i(a.label),1))),128))])]),e("tbody",null,[(l(!0),r(S,null,w(t.tableData,a=>(l(),r("tr",{key:a.id},[e("td",null,i(a.id),1),e("td",null,i(a.name),1),e("td",null,i(a.email),1),e("td",null,i(new Date(a.created_at).toLocaleDateString()),1),e("td",null,[e("span",{class:d(["badge",a.status?"bg-success":"bg-danger"])},i(a.status?"啟用":"停用"),3)]),e("td",null,[e("button",{class:"btn btn-sm btn-info me-1",onClick:o=>t.handleEdit(a.id)},s[11]||(s[11]=[e("i",{class:"material-icons"},"edit",-1)]),8,ae),e("button",{class:d(["btn btn-sm me-1",a.status?"btn-warning":"btn-success"]),onClick:o=>t.handleToggleStatus(a.id,a.status)},[e("i",ne,i(a.status?"block":"check_circle"),1)],10,se),e("button",{class:"btn btn-sm btn-primary me-1",onClick:o=>t.handleViewGrades(a.id)},s[12]||(s[12]=[e("i",{class:"material-icons"},"school",-1),D(" 學習紀錄 ")]),8,oe)])]))),128))])])]),t.totalRecords>t.pageSize?(l(),r("nav",le,[e("ul",re,[e("li",{class:d(["page-item",{disabled:t.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:s[5]||(s[5]=C(a=>t.handlePageChange(t.currentPage-1),["prevent"]))}," 上一頁 ")],2),(l(!0),r(S,null,w(Math.ceil(t.totalRecords/t.pageSize),a=>(l(),r("li",{key:a,class:d(["page-item",{active:t.currentPage===a}])},[e("a",{class:"page-link",href:"#",onClick:C(o=>t.handlePageChange(a),["prevent"])},i(a),9,ie)],2))),128)),e("li",{class:d(["page-item",{disabled:t.currentPage===Math.ceil(t.totalRecords/t.pageSize)}])},[e("a",{class:"page-link",href:"#",onClick:s[6]||(s[6]=C(a=>t.handlePageChange(t.currentPage+1),["prevent"]))}," 下一頁 ")],2)])])):j("",!0)])])])])]),f(y)])])}const me=V(q,[["render",ce]]);export{me as default};
