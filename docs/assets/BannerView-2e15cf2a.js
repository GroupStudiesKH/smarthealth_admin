import{_ as w,p as C,r as k,q as x,i as N,j as b,o,c as n,b as e,k as u,y as F,F as r,f as p,n as S,a as V,l as h,t as f}from"./index-c9f32b28.js";import{F as D,N as T,_ as L,a as M}from"./sidebar-1418a09a.js";const E={components:{Footer:D,Navbar:T,Sidebar:L},setup(){C();const i=k(""),s=k(!1),m=k([]),t=x([{key:"id",label:"編號"},{key:"title",label:"主要標題"},{key:"status",label:"狀態"},{key:"img_url",label:"圖片"},{key:"actions",label:"操作"}]),y=async()=>{try{const l=await M.listBanners();m.value=l}catch(l){console.error("獲取 Banner 列表時發生錯誤:",l)}},B=async l=>{try{confirm("確定要刪除此 Banner 嗎？")&&(await M.deleteBanner(l),await y(),_("Banner 已成功刪除"))}catch{c("刪除 Banner 時發生錯誤")}},c=l=>{i.value=l,s.value=!0},_=l=>{i.value=l,s.value=!0},v=()=>{s.value=!1};return N(()=>{y()}),{tableData:m,tableColumns:t,deleteBanner:B,showErrorModal:c,showSuccessModal:_,closeModal:v,modalMessage:i,showModal:s}}},H={class:"main-wrapper"},I={class:"page-wrapper"},j={class:"page-content"},q={class:"row mb-3"},z={class:"col-12 text-end"},R={class:"row"},A={class:"col-12 stretch-card"},G={class:"card"},J={class:"card-body"},K={class:"table-responsive"},O={class:"table"},P=["src"],Q=["href"],U=["onClick"],W={class:"modal-dialog"},X={class:"modal-content"},Y={class:"modal-header"},Z=["innerHTML"],$={class:"modal-footer"},ee={key:0,class:"modal-backdrop"};function se(i,s,m,t,y,B){const c=b("Sidebar"),_=b("Navbar"),v=b("router-link"),l=b("Footer");return o(),n(r,null,[e("div",H,[u(c),e("div",I,[u(_),e("div",j,[e("div",q,[e("div",z,[u(v,{to:"/layout/banner/add",class:"btn btn-primary"},{default:F(()=>s[2]||(s[2]=[h("新增Banner")])),_:1})])]),e("div",R,[e("div",A,[e("div",G,[e("div",J,[s[5]||(s[5]=e("h6",{class:"card-title"},"Banner列表",-1)),e("div",K,[e("table",O,[e("thead",null,[e("tr",null,[(o(!0),n(r,null,p(t.tableColumns,a=>(o(),n("th",{key:a.key},f(a.label),1))),128))])]),e("tbody",null,[(o(!0),n(r,null,p(t.tableData,(a,g)=>(o(),n("tr",{key:g},[(o(!0),n(r,null,p(t.tableColumns,d=>(o(),n("td",{key:d.key},[d.key==="img_url"?(o(),n("img",{key:0,src:a.img_url,alt:"Banner Image",class:"img-fluid rounded-0",style:{"max-width":"100px"}},null,8,P)):d.key==="actions"?(o(),n(r,{key:1},[e("a",{href:`/layout/banner/edit/${a.id}`,class:"btn btn-link p-0 me-2"},s[3]||(s[3]=[e("i",{class:"material-icons"},"edit",-1)]),8,Q),e("button",{onClick:te=>t.deleteBanner(a.id),class:"btn btn-link p-0"},s[4]||(s[4]=[e("i",{class:"material-icons"},"delete",-1)]),8,U)],64)):d.key==="status"?(o(),n(r,{key:2},[h(f(a.status==="active"?"啟用":"未啟用"),1)],64)):(o(),n(r,{key:3},[h(f(a[d.key]),1)],64))]))),128))]))),128))])])])])])])])]),u(l)])]),e("div",{class:S(["modal",{"d-block":t.showModal}]),tabindex:"-1"},[e("div",W,[e("div",X,[e("div",Y,[s[6]||(s[6]=e("h5",{class:"modal-title"},"提示",-1)),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=(...a)=>t.closeModal&&t.closeModal(...a))})]),e("div",{class:"modal-body",innerHTML:t.modalMessage},null,8,Z),e("div",$,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[1]||(s[1]=(...a)=>t.closeModal&&t.closeModal(...a))},"關閉")])])])],2),t.showModal?(o(),n("div",ee)):V("",!0)],64)}const ne=w(E,[["render",se],["__scopeId","data-v-28204d07"]]);export{ne as default};
