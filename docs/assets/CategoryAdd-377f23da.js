import{F as y,N,_ as h}from"./sidebar-00f7f4b6.js";import{_ as C,i as w,r as n,k as r,o as g,c as x,b as a,l as i,d as S,e as _,g as b,y as I,p as k,a as F,F as V,m as B}from"./index-fd32de25.js";import{a as L}from"./api-service-a37f4a4e.js";import{L as D}from"./loading-40382ee7.js";const T={components:{Footer:y,Navbar:N,Sidebar:h,Loading:D},setup(){const c=w(),e=n(""),m=n(""),o=n(null),l=n(!1),p=n(null);return{categoryName:e,description:m,handleSubmit:async()=>{l.value=!0,p.value=null;try{const t=new FormData;t.append("name",e.value),t.append("description",m.value),t.append("type","category"),o.value&&t.append("featured_image",o.value),await L.addTag(t),c.push("/course/category")}catch(t){console.error("新增失敗:",t),p.value="新增分類時發生錯誤，請稍後再試"}finally{l.value=!1}},handleImageChange:t=>{const d=t.target.files[0];d&&(o.value=d)},loading:l}}},U={class:"main-wrapper"},A={class:"page-wrapper"},M={class:"page-content"},j={class:"row mb-4"},q={class:"col-md-12 grid-margin stretch-card"},E={class:"card"},R={class:"card-body"},z={class:"mb-3"},G={class:"mb-3"},H={class:"mb-3"},J={class:"d-flex justify-content-end"};function K(c,e,m,o,l,p){const u=r("Sidebar"),f=r("Navbar"),t=r("router-link"),d=r("Footer"),v=r("Loading");return g(),x(V,null,[a("div",U,[i(u),a("div",A,[i(f),a("div",M,[a("div",j,[a("div",q,[a("div",E,[a("div",R,[e[9]||(e[9]=a("h6",{class:"card-title"},"新增課程分類",-1)),a("form",{onSubmit:e[3]||(e[3]=S((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},[a("div",z,[e[4]||(e[4]=a("label",{for:"categoryName",class:"form-label"},"分類名稱",-1)),_(a("input",{type:"text",class:"form-control",id:"categoryName","onUpdate:modelValue":e[0]||(e[0]=s=>o.categoryName=s),required:""},null,512),[[b,o.categoryName]])]),a("div",G,[e[5]||(e[5]=a("label",{for:"description",class:"form-label"},"分類描述",-1)),_(a("textarea",{class:"form-control",id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>o.description=s),rows:"5"},null,512),[[b,o.description]])]),a("div",H,[e[6]||(e[6]=a("label",{for:"featuredImage",class:"form-label"},"分類圖片",-1)),a("input",{type:"file",class:"form-control",id:"featuredImage",onChange:e[2]||(e[2]=(...s)=>o.handleImageChange&&o.handleImageChange(...s)),accept:"image/*"},null,32)]),a("div",J,[i(t,{class:"btn btn-secondary me-2",to:{name:"category-list"}},{default:I(()=>e[7]||(e[7]=[B(" 取消 ")])),_:1}),e[8]||(e[8]=a("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])])])]),i(d)])]),c.isUploading?(g(),k(v,{key:0})):F("",!0)],64)}const X=C(T,[["render",K],["__scopeId","data-v-3638f27b"]]);export{X as default};
