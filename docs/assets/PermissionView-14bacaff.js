import{_ as S,i as w,r as v,q as x,j as C,k as d,o as t,c as s,b as e,l as m,y as L,F as _,f,p as V,a as B,m as g,t as F}from"./index-5d22d589.js";import{a as D}from"./api-service-a37f4a4e.js";import{F as T,N as j,_ as E}from"./sidebar-5fc827b6.js";import{L as P}from"./loading-fb24fc9e.js";const R={components:{Footer:T,Navbar:j,Sidebar:E,Loading:P},setup(){w();const p=v([]),a=v(0),n=v(!1),o=()=>{c()},k=()=>{Object.keys(searchForm).forEach(l=>{searchForm[l]=""}),c()},y=x([{key:"id",label:"編號"},{key:"name",label:"名稱"},{key:"actions",label:"操作"}]),c=async(l=1,b=10,u="")=>{try{n.value=!0;const r=await D.getPermissions({page:l,pageSize:b,search:u});n.value=!1,p.value=r.data,a.value=r.recordsTotal}catch(r){n.value=!1,console.error("Failed to fetch permission data:",r)}};return C(()=>{c()}),{tableData:p,tableColumns:y,handleSearch:o,resetSearch:k,loading:n}}},$={class:"main-wrapper"},q={class:"page-wrapper"},M={class:"page-content"},O={class:"row mb-3"},z={class:"col-12 text-end"},A={class:"row"},G={class:"col-12 stretch-card"},H={class:"card"},I={class:"card-body"},J={class:"table-responsive"},K={class:"table"},Q=["href"];function U(p,a,n,o,k,y){const c=d("Sidebar"),l=d("Navbar"),b=d("router-link"),u=d("Footer"),r=d("Loading");return t(),s(_,null,[e("div",$,[m(c),e("div",q,[m(l),e("div",M,[e("div",O,[e("div",z,[m(b,{to:"/permission/add",class:"btn btn-primary"},{default:L(()=>a[0]||(a[0]=[g("新增權限")])),_:1})])]),e("div",A,[e("div",G,[e("div",H,[e("div",I,[a[2]||(a[2]=e("h6",{class:"card-title"},"權限列表",-1)),e("div",J,[e("table",K,[e("thead",null,[e("tr",null,[(t(!0),s(_,null,f(o.tableColumns,i=>(t(),s("th",{key:i.key},F(i.label),1))),128))])]),e("tbody",null,[(t(!0),s(_,null,f(o.tableData,(i,N)=>(t(),s("tr",{key:N},[(t(!0),s(_,null,f(o.tableColumns,h=>(t(),s("td",{key:h.key},[h.key==="actions"?(t(),s("a",{key:0,href:`/permission/edit/${i.id}`,class:"btn btn-link p-0"},a[1]||(a[1]=[e("i",{class:"material-icons"},"edit",-1)]),8,Q)):(t(),s(_,{key:1},[g(F(i[h.key]),1)],64))]))),128))]))),128))])])])])])])])]),m(u)])]),o.loading?(t(),V(r,{key:0})):B("",!0)],64)}const ee=S(R,[["render",U]]);export{ee as default};
