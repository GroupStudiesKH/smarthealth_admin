import{_,p as x,u as V,q as M,r as D,s as U,l as k,o as r,c as n,m as w,a as e,t as i,b as N,h as m,d as t,f as d,n as c,j as f,i as S,v as I,F as z,e as E,g as h,x as L,y as C}from"./index-2084911f.js";import{F,N as P,_ as B}from"./sidebar-d4d14e1c.js";const O={components:{Footer:F,Navbar:P,Sidebar:B},setup(){const y=x(),a=V(),v=a.params.id!==void 0;a.params.id;const o=M({name:"",email:"",password:"",showPassword:!1,status:!0,registrationDate:"",lastLoginDate:"",registrationSource:"",lastLoginIp:"",identity:"",identityOptions:[{value:"student",label:"學生"},{value:"teacher",label:"老師"},{value:"doctor",label:"醫師"},{value:"nurse",label:"護理人員"},{value:"vendor",label:"廠商"},{value:"other",label:"其他"}],otherIdentity:"",organization:"",idNumber:"",address:"",phone:"",gender:""}),l=D({}),u=D(!1),b=D(""),g=async()=>{if(v)try{Object.assign(o,{name:"測試會員",email:"test@example.com",status:!0,registrationDate:"2023-01-01",lastLoginDate:"2023-12-01",registrationSource:"網站註冊",lastLoginIp:"192.168.1.1",identity:"一般會員",phone:"0912345678",gender:"male"})}catch(s){console.error("Failed to fetch member data:",s),b.value="獲取會員資料失敗",u.value=!0}},p=async()=>{try{if(l.value={},!o.name){l.value.name="請輸入會員名稱";return}if(!o.email){l.value.email="請輸入Email";return}if(!o.identity){l.value.identity="請選擇身份別";return}if(o.identity==="other"&&!o.otherIdentity){l.value.otherIdentity="請填寫其他身份";return}if(!o.organization){l.value.organization="請輸入任職單位";return}if(!v&&!o.password){l.value.password="請輸入密碼";return}if(o.password&&(o.password.length<8||!/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(o.password))){l.value.password="密碼需要至少八碼及英數混合";return}if(o.phone){if(!/^[0-9]{10}$/.test(o.phone)){l.value.phone="請輸入有效的手機號碼";return}}else{l.value.phone="請輸入手機號碼";return}if(!o.gender){l.value.gender="請選擇性別";return}if(!o.idNumber){l.value.idNumber="請輸入身分證字號";return}if(!o.address){l.value.address="請輸入地址";return}await new Promise(s=>setTimeout(s,500)),y.push("/member")}catch(s){console.error("Failed to save member:",s),b.value="儲存失敗",u.value=!0}};return U(()=>{g()}),{formData:o,errors:l,isEdit:v,showModal:u,modalMessage:b,handleSubmit:p}}},R={class:"main-wrapper"},T={class:"page-wrapper"},j={class:"page-content"},A={class:"row"},Z={class:"col-md-12 grid-margin stretch-card"},q={class:"card"},G={class:"card-body"},H={class:"card-title"},J={class:"row"},K={class:"col-md-6 col-12 mb-3"},Q=["disabled"],W={key:0,class:"invalid-feedback"},X={class:"col-md-6 col-12 mb-3"},Y={key:0,class:"invalid-feedback"},$={class:"col-md-6 col-12 mb-3"},oo={class:"input-group"},ao=["type","placeholder"],eo={class:"material-icons"},so={key:0,class:"invalid-feedback"},to={class:"col-md-6 col-12 mb-3"},lo=["value"],ro={key:0,class:"invalid-feedback"},no={key:0,class:"col-md-6 col-12 mb-3"},io={key:0,class:"invalid-feedback"},mo={class:"col-md-6 col-12 mb-3"},co={key:0,class:"invalid-feedback"},fo={class:"col-md-6 col-12 mb-3"},bo={class:"col-md-6 col-12 mb-3"},vo={class:"col-md-6 col-12 mb-3"},uo={key:0,class:"invalid-feedback"},yo={class:"col-md-6 col-12 mb-3"},go={class:"form-check"},po={class:"form-check"},Do={key:0,class:"invalid-feedback"},ko={class:"col-md-6 col-12 mb-3"},wo={class:"form-check form-switch"},ho={class:"form-check-label"},_o={key:1},xo={class:"col-md-6 col-12 mb-3"},Vo={class:"col-md-6 col-12 mb-3"},Mo={class:"col-md-6 col-12 mb-3"},Uo={class:"col-md-6 col-12 mb-3"},No={class:"modal-dialog"},So={class:"modal-content"},Io={class:"modal-header"},zo={class:"modal-body"},Eo={class:"modal-footer"};function Lo(y,a,v,o,l,u){const b=k("Sidebar"),g=k("Navbar"),p=k("Footer");return r(),n("div",R,[w(b),e("div",T,[w(g),e("div",j,[e("div",A,[e("div",Z,[e("div",q,[e("div",G,[e("h6",H,i(o.isEdit?"編輯會員":"新增會員"),1),e("form",{onSubmit:a[18]||(a[18]=N((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},[e("div",J,[e("div",K,[a[21]||(a[21]=e("label",{class:"form-label"},[m("Email "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"email",class:c(["form-control",{"is-invalid":o.errors.email}]),"onUpdate:modelValue":a[0]||(a[0]=s=>o.formData.email=s),disabled:o.isEdit},null,10,Q),[[d,o.formData.email]]),o.errors.email?(r(),n("div",W,i(o.errors.email),1)):f("",!0)]),e("div",X,[a[22]||(a[22]=e("label",{class:"form-label"},[m("會員名稱 "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"text",class:c(["form-control",{"is-invalid":o.errors.name}]),"onUpdate:modelValue":a[1]||(a[1]=s=>o.formData.name=s)},null,2),[[d,o.formData.name]]),o.errors.name?(r(),n("div",Y,i(o.errors.name),1)):f("",!0)]),e("div",$,[a[23]||(a[23]=e("label",{class:"form-label"},[m("密碼 "),e("span",{class:"text-danger"},"*")],-1)),e("div",oo,[t(e("input",{type:o.formData.showPassword?"text":"password",class:c(["form-control",{"is-invalid":o.errors.password}]),"onUpdate:modelValue":a[2]||(a[2]=s=>o.formData.password=s),placeholder:o.isEdit?"不修改請留空":""},null,10,ao),[[S,o.formData.password]]),e("button",{class:"btn btn-outline-secondary",type:"button",onClick:a[3]||(a[3]=s=>o.formData.showPassword=!o.formData.showPassword)},[e("i",eo,i(o.formData.showPassword?"visibility_off":"visibility"),1)]),o.errors.password?(r(),n("div",so,i(o.errors.password),1)):f("",!0)])]),e("div",to,[a[25]||(a[25]=e("label",{class:"form-label"},[m("身份別 "),e("span",{class:"text-danger"},"*")],-1)),t(e("select",{class:c(["form-select",{"is-invalid":o.errors.identity}]),"onUpdate:modelValue":a[4]||(a[4]=s=>o.formData.identity=s)},[a[24]||(a[24]=e("option",{value:""},"請選擇身份別",-1)),(r(!0),n(z,null,E(o.formData.identityOptions,s=>(r(),n("option",{key:s.value,value:s.value},i(s.label),9,lo))),128))],2),[[I,o.formData.identity]]),o.errors.identity?(r(),n("div",ro,i(o.errors.identity),1)):f("",!0)]),o.formData.identity==="other"?(r(),n("div",no,[a[26]||(a[26]=e("label",{class:"form-label"},[m("其他身份 "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"text",class:c(["form-control",{"is-invalid":o.errors.otherIdentity}]),"onUpdate:modelValue":a[5]||(a[5]=s=>o.formData.otherIdentity=s)},null,2),[[d,o.formData.otherIdentity]]),o.errors.otherIdentity?(r(),n("div",io,i(o.errors.otherIdentity),1)):f("",!0)])):f("",!0),e("div",mo,[a[27]||(a[27]=e("label",{class:"form-label"},[m("任職單位 "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"text",class:c(["form-control",{"is-invalid":o.errors.organization}]),"onUpdate:modelValue":a[6]||(a[6]=s=>o.formData.organization=s)},null,2),[[d,o.formData.organization]]),o.errors.organization?(r(),n("div",co,i(o.errors.organization),1)):f("",!0)]),e("div",fo,[a[28]||(a[28]=e("label",{class:"form-label"},[m("身分證字號 "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"text",class:c(["form-control",{"is-invalid":o.errors.idNumber}]),"onUpdate:modelValue":a[7]||(a[7]=s=>o.formData.idNumber=s)},null,2),[[d,o.formData.idNumber]])]),e("div",bo,[a[29]||(a[29]=e("label",{class:"form-label"},[m("地址 "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"text",class:c(["form-control",{"is-invalid":o.errors.address}]),"onUpdate:modelValue":a[8]||(a[8]=s=>o.formData.address=s)},null,2),[[d,o.formData.address]])]),e("div",vo,[a[30]||(a[30]=e("label",{class:"form-label"},[m("手機 "),e("span",{class:"text-danger"},"*")],-1)),t(e("input",{type:"tel",class:c(["form-control",{"is-invalid":o.errors.phone}]),"onUpdate:modelValue":a[9]||(a[9]=s=>o.formData.phone=s)},null,2),[[d,o.formData.phone]]),o.errors.phone?(r(),n("div",uo,i(o.errors.phone),1)):f("",!0)]),e("div",yo,[a[33]||(a[33]=e("label",{class:"form-label"},[m("性別 "),e("span",{class:"text-danger"},"*")],-1)),e("div",go,[t(e("input",{type:"radio",class:"form-check-input",id:"male",value:"male","onUpdate:modelValue":a[10]||(a[10]=s=>o.formData.gender=s)},null,512),[[h,o.formData.gender]]),a[31]||(a[31]=e("label",{class:"form-check-label",for:"male"},"男性",-1))]),e("div",po,[t(e("input",{type:"radio",class:"form-check-input",id:"female",value:"female","onUpdate:modelValue":a[11]||(a[11]=s=>o.formData.gender=s)},null,512),[[h,o.formData.gender]]),a[32]||(a[32]=e("label",{class:"form-check-label",for:"female"},"女性",-1))]),o.errors.gender?(r(),n("div",Do,i(o.errors.gender),1)):f("",!0)]),e("div",ko,[a[34]||(a[34]=e("label",{class:"form-label"},"狀態",-1)),e("div",wo,[t(e("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":a[12]||(a[12]=s=>o.formData.status=s)},null,512),[[L,o.formData.status]]),e("label",ho,i(o.formData.status?"啟用":"停用"),1)])]),o.isEdit?(r(),n("div",_o,[e("div",xo,[a[35]||(a[35]=e("label",{class:"form-label"},"註冊日期",-1)),t(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=s=>o.formData.registrationDate=s),disabled:""},null,512),[[d,o.formData.registrationDate]])]),e("div",Vo,[a[36]||(a[36]=e("label",{class:"form-label"},"上次登入日期",-1)),t(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=s=>o.formData.lastLoginDate=s),disabled:""},null,512),[[d,o.formData.lastLoginDate]])]),e("div",Mo,[a[37]||(a[37]=e("label",{class:"form-label"},"註冊來源",-1)),t(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[15]||(a[15]=s=>o.formData.registrationSource=s),disabled:""},null,512),[[d,o.formData.registrationSource]])]),e("div",Uo,[a[38]||(a[38]=e("label",{class:"form-label"},"上次登入IP",-1)),t(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[16]||(a[16]=s=>o.formData.lastLoginIp=s),disabled:""},null,512),[[d,o.formData.lastLoginIp]])])])):f("",!0)]),a[39]||(a[39]=e("button",{type:"submit",class:"btn btn-primary me-2"},"儲存",-1)),e("button",{type:"button",class:"btn btn-secondary",onClick:a[17]||(a[17]=s=>y.router.push("/member"))},"取消")],32)])])])])]),w(p)]),e("div",{class:c(["modal fade",{show:o.showModal}]),tabindex:"-1",style:C({display:o.showModal?"block":"none"})},[e("div",No,[e("div",So,[e("div",Io,[a[40]||(a[40]=e("h5",{class:"modal-title"},"錯誤提示",-1)),e("button",{type:"button",class:"btn-close",onClick:a[19]||(a[19]=s=>o.showModal=!1)})]),e("div",zo,i(o.modalMessage),1),e("div",Eo,[e("button",{type:"button",class:"btn btn-secondary",onClick:a[20]||(a[20]=s=>o.showModal=!1)},"關閉")])])])],6)])}const Po=_(O,[["render",Lo]]);export{Po as default};
