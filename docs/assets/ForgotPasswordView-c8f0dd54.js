import{_ as k,i as h,r as e,k as f,o as d,c as i,b as s,m as g,e as x,g as E,t as y,l as S,y as C,n as _,a as c,p as L,F}from"./index-9ad84de7.js";import{a as V}from"./api-service-a37f4a4e.js";import{L as B}from"./loading-c9ce64e9.js";const N={components:{Loading:B},setup(){const m=h(),o=e(""),t=e(!1),l=e(!1),n=e(""),r=e(!1);return{email:o,submitForm:async w=>{var v,p;w.preventDefault(),l.value=!0;try{l.value=!0,await V.forgetPassword({email:o.value}),l.value=!1,t.value=!0}catch(M){n.value=((p=(v=M.response)==null?void 0:v.data)==null?void 0:p.message)||"發送重設密碼信件失敗",r.value=!0,l.value=!1}finally{l.value=!1}},showSuccessModal:t,closeSuccessModal:()=>{t.value=!1,m.push("/login")},isLoading:l,errorMessage:n,showErrorModal:r,closeErrorModal:()=>{r.value=!1},isLoading:l}}},D={class:"main-wrapper"},P={class:"page-wrapper full-page"},T={class:"page-content d-flex align-items-center justify-content-center"},j={class:"row w-100 mx-0 auth-page"},q={class:"col-md-10 col-lg-8 col-xl-6 mx-auto"},z={class:"card"},H={class:"row"},R={class:"col-md-8 ps-md-0"},U={class:"auth-form-wrapper px-4 py-5"},A={class:"mb-3"},G=["disabled"],I={class:"modal-dialog"},J={class:"modal-content"},K={class:"modal-header"},O={class:"modal-footer"},Q={class:"modal-dialog"},W={class:"modal-content"},X={class:"modal-header"},Y={class:"modal-body"},Z={class:"modal-footer"};function $(m,o,t,l,n,r){const u=f("router-link"),b=f("Loading");return d(),i(F,null,[s("div",D,[s("div",P,[s("div",T,[s("div",j,[s("div",q,[s("div",z,[s("div",H,[o[11]||(o[11]=s("div",{class:"col-md-4 pe-md-0"},[s("div",{class:"auth-side-wrapper",style:{"background-image":"url('assets/images/login.webp')"}})],-1)),s("div",R,[s("div",U,[o[8]||(o[8]=s("a",{href:"#",class:"nobleui-logo d-block mb-2"},[g("Smart"),s("span",null,"Health")],-1)),o[9]||(o[9]=s("h5",{class:"text-secondary fw-normal mb-4"},"忘記密碼？",-1)),o[10]||(o[10]=s("p",{class:"mb-4"},"請輸入您的電子郵件地址，我們將發送重設密碼的連結給您。",-1)),s("form",{class:"forms-sample",onSubmit:o[1]||(o[1]=(...a)=>l.submitForm&&l.submitForm(...a))},[s("div",A,[o[6]||(o[6]=s("label",{for:"userEmail",class:"form-label"},"Email",-1)),x(s("input",{type:"email",class:"form-control",id:"userEmail","onUpdate:modelValue":o[0]||(o[0]=a=>l.email=a),placeholder:"請輸入您的 Email",required:""},null,512),[[E,l.email]])]),s("button",{type:"submit",class:"btn btn-primary me-2 mb-2 mb-md-0",disabled:l.isLoading},y(l.isLoading?"處理中...":"發送重設密碼連結"),9,G),S(u,{to:"/login",class:"btn btn-secondary"},{default:C(()=>o[7]||(o[7]=[g(" 返回登入 ")])),_:1})],32)])])])])])])])]),l.showSuccessModal?(d(),i("div",{key:0,class:_(["modal fade",{show:l.showSuccessModal}]),tabindex:"-1",style:{display:"block"}},[s("div",I,[s("div",J,[s("div",K,[o[12]||(o[12]=s("h5",{class:"modal-title"},"發送成功",-1)),s("button",{type:"button",class:"btn-close",onClick:o[2]||(o[2]=(...a)=>l.closeSuccessModal&&l.closeSuccessModal(...a))})]),o[13]||(o[13]=s("div",{class:"modal-body"},[s("p",null,"重設密碼連結已發送至您的信箱，請查收並點擊連結重設密碼。")],-1)),s("div",O,[s("button",{type:"button",class:"btn btn-primary",onClick:o[3]||(o[3]=(...a)=>l.closeSuccessModal&&l.closeSuccessModal(...a))},"確定")])])])],2)):c("",!0),l.showErrorModal?(d(),i("div",{key:1,class:_(["modal fade",{show:l.showErrorModal}]),tabindex:"-1",style:{display:"block"}},[s("div",Q,[s("div",W,[s("div",X,[o[14]||(o[14]=s("h5",{class:"modal-title"},"錯誤",-1)),s("button",{type:"button",class:"btn-close",onClick:o[4]||(o[4]=(...a)=>l.closeErrorModal&&l.closeErrorModal(...a))})]),s("div",Y,[s("p",null,y(l.errorMessage),1)]),s("div",Z,[s("button",{type:"button",class:"btn btn-primary",onClick:o[5]||(o[5]=(...a)=>l.closeErrorModal&&l.closeErrorModal(...a))},"確定")])])])],2)):c("",!0)]),l.isLoading?(d(),L(b,{key:0})):c("",!0)],64)}const as=k(N,[["render",$]]);export{as as default};
