import{_ as y,p as k,r as f,i as q,j as d,o as i,c as u,b as t,k as m,F as h,f as L,m as x,a as C,t as p}from"./index-d5779e68.js";import{F as N,N as A,_ as w,a as F}from"./sidebar-aa2c2d34.js";import{L as Q}from"./loading-4a76ab30.js";const S={components:{Footer:N,Navbar:A,Sidebar:w,Loading:Q},setup(){const c=k(),s=f([]),r=f(!1),o=()=>{c.push({name:"faqAdd"})},b=e=>{c.push({name:"faqEdit",params:{id:e.id}})},v=async e=>{if(confirm("確定要刪除這個 FAQ 項目嗎？"))try{await F.deletePost(e);const n=s.value.findIndex(_=>_.id===e);n!==-1&&s.value.splice(n,1)}catch(n){console.error("Error deleting FAQ:",n),alert("刪除失敗，請稍後再試")}},l=async()=>{try{r.value=!0;const e=await F.getPosts({type:"faq"});s.value=e,r.value=!1}catch(e){r.value=!1,console.error("Error fetching FAQ list:",e)}};return q(()=>{l()}),{faqList:s,loading:r,addFaq:o,editFaq:b,deleteFaq:v}}},B={class:"main-wrapper"},E={class:"page-wrapper"},V={class:"page-content"},j={class:"row"},I={class:"col-md-12 grid-margin stretch-card"},P={class:"card"},D={class:"card-body"},M={class:"d-flex justify-content-end mb-3"},R={class:"table-responsive"},$={class:"table"},z={class:"sortable-list"},G=["onClick"],H=["onClick"];function J(c,s,r,o,b,v){const l=d("Navbar"),e=d("Sidebar"),n=d("Footer"),_=d("Loading");return i(),u(h,null,[t("div",B,[m(l),m(e),t("div",E,[t("div",V,[t("div",j,[t("div",I,[t("div",P,[t("div",D,[s[2]||(s[2]=t("h6",{class:"card-title"},"FAQ 管理",-1)),t("div",M,[t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...a)=>o.addFaq&&o.addFaq(...a))},"新增 FAQ")]),t("div",R,[t("table",$,[s[1]||(s[1]=t("thead",null,[t("tr",null,[t("th",null,"標題"),t("th",null,"排序"),t("th",null,"狀態"),t("th",null,"操作")])],-1)),t("tbody",z,[(i(!0),u(h,null,L(o.faqList,(a,K)=>(i(),u("tr",{key:a.id},[t("td",null,p(a.title),1),t("td",null,p(a.sort),1),t("td",null,p(a.status=="active"?"啟用":"停用"),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary me-2",onClick:g=>o.editFaq(a)},"編輯",8,G),t("button",{class:"btn btn-sm btn-danger",onClick:g=>o.deleteFaq(a.id)},"刪除",8,H)])]))),128))])])])])])])])]),m(n)])]),o.loading?(i(),x(_,{key:0})):C("",!0)],64)}const W=y(S,[["render",J],["__scopeId","data-v-dd516b4a"]]);export{W as default};
