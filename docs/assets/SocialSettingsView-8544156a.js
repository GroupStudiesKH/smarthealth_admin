import{_ as T,r as _,i as B,j as V,o as i,c as r,k as N,b as a,d as D,e as m,g as b,n as c,t as n,a as d}from"./index-b7e60ae9.js";import{F,N as q,_ as j,a as x}from"./sidebar-f26ea1a9.js";const I={components:{Footer:F,Navbar:q,Sidebar:j},setup(){const l=_({address:"",phone:"",email:"",facebook:"",line:"",twitter:"",youtube:""}),o=_({}),v=_(!1),e=_(""),u=_(""),g=t=>{var S,w;const U=((w=(S=t.response)==null?void 0:S.data)==null?void 0:w.errors)||{},k={};return Object.entries(U).forEach(([E,h])=>{const p=E.replace("meta_value.","");if(p.includes("_acc")){const M=p.replace("_acc",""),C={fb:"facebook",line:"line",twitter:"twitter",youtube:"youtube"};k[C[M]||M]=h[0]}else k[p]=h[0]}),k},f=async()=>{try{const t=await x.getSocialSetting();l.value={address:t.address,phone:t.phone,email:t.email,facebook:t.fb_acc,line:t.line_acc,twitter:t.twitter_acc,youtube:t.youtube_acc}}catch(t){console.error("獲取社群設定失敗:",t),u.value="錯誤",e.value="獲取設定失敗，請重新整理頁面",v.value=!0}},y=async()=>{try{o.value={};const t=[{meta_key:"address",meta_value:{address:l.value.address}},{meta_key:"phone",meta_value:{phone:l.value.phone}},{meta_key:"email",meta_value:{email:l.value.email}},{meta_key:"fb_acc",meta_value:{fb_acc:l.value.facebook}},{meta_key:"line_acc",meta_value:{line_acc:l.value.line}},{meta_key:"twitter_acc",meta_value:{twitter_acc:l.value.twitter}},{meta_key:"youtube_acc",meta_value:{youtube_acc:l.value.youtube}}];await x.updateSiteMetaBatch({settings:t}),u.value="成功",e.value="社群設定已更新",v.value=!0}catch(t){console.error("Error saving social settings:",t),o.value=g(t),u.value="錯誤",e.value="更新設定失敗，請檢查輸入內容",v.value=!0}},s=()=>{v.value=!1};return B(()=>{f()}),{socialSettings:l,errors:o,showModal:v,modalMessage:e,modalTitle:u,saveSocialSettings:y,closeModal:s}}},z={class:"main-wrapper"},A={class:"page-wrapper"},L={class:"page-content"},O={class:"row"},X={class:"col-md-12 grid-margin stretch-card"},Y={class:"card"},G={class:"card-body"},H={class:"mb-3"},J={key:0,class:"invalid-feedback"},K={class:"mb-3"},P={key:0,class:"invalid-feedback"},Q={class:"mb-3"},R={key:0,class:"invalid-feedback"},W={class:"mb-3"},Z={key:0,class:"invalid-feedback"},$={class:"mb-3"},ee={key:0,class:"invalid-feedback"},oe={class:"mb-3"},ae={key:0,class:"invalid-feedback"},se={class:"mb-3"},te={key:0,class:"invalid-feedback"},le={class:"modal-dialog"},ie={class:"modal-content"},re={class:"modal-header"},ne={class:"modal-title"},de={class:"modal-body"},ce={class:"modal-footer"},me={key:1,class:"modal-backdrop fade show"};function be(l,o,v,e,u,g){const f=V("Sidebar"),y=V("Navbar");return i(),r("div",z,[N(f),a("div",A,[N(y),a("div",L,[a("div",O,[a("div",X,[a("div",Y,[a("div",G,[o[18]||(o[18]=a("h6",{class:"card-title"},"社群設定",-1)),a("form",{onSubmit:o[7]||(o[7]=D((...s)=>e.saveSocialSettings&&e.saveSocialSettings(...s),["prevent"]))},[a("div",H,[o[10]||(o[10]=a("label",{for:"address",class:"form-label"},"地址",-1)),m(a("input",{type:"text",class:c(["form-control",{"is-invalid":e.errors.address}]),id:"address","onUpdate:modelValue":o[0]||(o[0]=s=>e.socialSettings.address=s),required:""},null,2),[[b,e.socialSettings.address]]),e.errors.address?(i(),r("div",J,n(e.errors.address),1)):d("",!0)]),a("div",K,[o[11]||(o[11]=a("label",{for:"phone",class:"form-label"},"電話",-1)),m(a("input",{type:"tel",class:c(["form-control",{"is-invalid":e.errors.phone}]),id:"phone","onUpdate:modelValue":o[1]||(o[1]=s=>e.socialSettings.phone=s),required:""},null,2),[[b,e.socialSettings.phone]]),e.errors.phone?(i(),r("div",P,n(e.errors.phone),1)):d("",!0)]),a("div",Q,[o[12]||(o[12]=a("label",{for:"email",class:"form-label"},"電子郵件",-1)),m(a("input",{type:"email",class:c(["form-control",{"is-invalid":e.errors.email}]),id:"email","onUpdate:modelValue":o[2]||(o[2]=s=>e.socialSettings.email=s),required:""},null,2),[[b,e.socialSettings.email]]),e.errors.email?(i(),r("div",R,n(e.errors.email),1)):d("",!0)]),a("div",W,[o[13]||(o[13]=a("label",{for:"facebook",class:"form-label"},"Facebook 連結",-1)),m(a("input",{type:"url",class:c(["form-control",{"is-invalid":e.errors.fb_acc}]),id:"facebook","onUpdate:modelValue":o[3]||(o[3]=s=>e.socialSettings.facebook=s),placeholder:"https://facebook.com/your-page"},null,2),[[b,e.socialSettings.facebook]]),e.errors.facebook?(i(),r("div",Z,n(e.errors.facebook),1)):d("",!0)]),a("div",$,[o[14]||(o[14]=a("label",{for:"twitter",class:"form-label"},"Twitter(X) 連結",-1)),m(a("input",{type:"url",class:c(["form-control",{"is-invalid":e.errors.twitter_acc}]),id:"twitter","onUpdate:modelValue":o[4]||(o[4]=s=>e.socialSettings.twitter=s),placeholder:"https://twitter.com/your-account"},null,2),[[b,e.socialSettings.twitter]]),e.errors.twitter?(i(),r("div",ee,n(e.errors.twitter),1)):d("",!0)]),a("div",oe,[o[15]||(o[15]=a("label",{for:"youtube",class:"form-label"},"YouTube 連結",-1)),m(a("input",{type:"url",class:c(["form-control",{"is-invalid":e.errors.youtube_acc}]),id:"youtube","onUpdate:modelValue":o[5]||(o[5]=s=>e.socialSettings.youtube=s),placeholder:"https://youtube.com/@your-channel"},null,2),[[b,e.socialSettings.youtube]]),e.errors.youtube?(i(),r("div",ae,n(e.errors.youtube),1)):d("",!0)]),a("div",se,[o[16]||(o[16]=a("label",{for:"line",class:"form-label"},"LINE ID",-1)),m(a("input",{type:"text",class:c(["form-control",{"is-invalid":e.errors.line_acc}]),id:"line","onUpdate:modelValue":o[6]||(o[6]=s=>e.socialSettings.line=s),placeholder:"@your-line-id"},null,2),[[b,e.socialSettings.line]]),e.errors.line?(i(),r("div",te,n(e.errors.line),1)):d("",!0)]),o[17]||(o[17]=a("button",{type:"submit",class:"btn btn-primary me-2"},"儲存設定",-1))],32)])])])])]),e.showModal?(i(),r("div",{key:0,class:c(["modal fade",{show:e.showModal}]),tabindex:"-1",style:{display:"block"}},[a("div",le,[a("div",ie,[a("div",re,[a("h5",ne,n(e.modalTitle),1),a("button",{type:"button",class:"btn-close",onClick:o[8]||(o[8]=(...s)=>e.closeModal&&e.closeModal(...s))})]),a("div",de,[a("p",null,n(e.modalMessage),1)]),a("div",ce,[a("button",{type:"button",class:"btn btn-secondary",onClick:o[9]||(o[9]=(...s)=>e.closeModal&&e.closeModal(...s))},"關閉")])])])],2)):d("",!0),e.showModal?(i(),r("div",me)):d("",!0)])])}const _e=T(I,[["render",be]]);export{_e as default};
