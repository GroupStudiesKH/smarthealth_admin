import{F as v,N as b,_ as y}from"./sidebar-0cb9a7ca.js";import{_ as h,i as N,r as d,k as n,o as u,c as C,b as a,l as i,d as S,e as w,g as x,y as I,p as k,a as F,F as V,m as B}from"./index-dd0c0eb2.js";import{a as L}from"./api-service-a37f4a4e.js";import{L as D}from"./loading-196c643f.js";const T={components:{Footer:v,Navbar:b,Sidebar:y,Loading:D},setup(){const c=N(),e=d(""),r=d(null),t=d(!1),m=d(null);return{categoryName:e,handleSubmit:async()=>{t.value=!0,m.value=null;try{const o=new FormData;o.append("name",e.value),o.append("type","category"),r.value&&o.append("featured_image",r.value),await L.addTag(o),c.push("/course/category")}catch(o){console.error("新增失敗:",o),m.value="新增分類時發生錯誤，請稍後再試"}finally{t.value=!1}},handleImageChange:o=>{const l=o.target.files[0];l&&(r.value=l)},loading:t}}},A={class:"main-wrapper"},M={class:"page-wrapper"},U={class:"page-content"},j={class:"row mb-4"},q={class:"col-md-12 grid-margin stretch-card"},E={class:"card"},R={class:"card-body"},z={class:"mb-3"},G={class:"mb-3"},H={class:"d-flex justify-content-end"};function J(c,e,r,t,m,_){const p=n("Sidebar"),o=n("Navbar"),l=n("router-link"),g=n("Footer"),f=n("Loading");return u(),C(V,null,[a("div",A,[i(p),a("div",M,[i(o),a("div",U,[a("div",j,[a("div",q,[a("div",E,[a("div",R,[e[7]||(e[7]=a("h6",{class:"card-title"},"新增課程分類",-1)),a("form",{onSubmit:e[2]||(e[2]=S((...s)=>t.handleSubmit&&t.handleSubmit(...s),["prevent"]))},[a("div",z,[e[3]||(e[3]=a("label",{for:"categoryName",class:"form-label"},"分類名稱",-1)),w(a("input",{type:"text",class:"form-control",id:"categoryName","onUpdate:modelValue":e[0]||(e[0]=s=>t.categoryName=s),required:""},null,512),[[x,t.categoryName]])]),a("div",G,[e[4]||(e[4]=a("label",{for:"featuredImage",class:"form-label"},"分類圖片",-1)),a("input",{type:"file",class:"form-control",id:"featuredImage",onChange:e[1]||(e[1]=(...s)=>t.handleImageChange&&t.handleImageChange(...s)),accept:"image/*"},null,32)]),a("div",H,[i(l,{class:"btn btn-secondary me-2",to:{name:"category-list"}},{default:I(()=>e[5]||(e[5]=[B(" 取消 ")])),_:1}),e[6]||(e[6]=a("button",{type:"submit",class:"btn btn-primary"},"儲存",-1))])],32)])])])])]),i(g)])]),c.isUploading?(u(),k(f,{key:0})):F("",!0)],64)}const W=h(T,[["render",J],["__scopeId","data-v-aab086a6"]]);export{W as default};
