import{_ as R,p as z,r as c,k as C,l as b,o as s,c as n,m as k,a as e,d as T,f as L,v as M,F as h,e as S,h as P,t as l,j as w,n as N,b as x}from"./index-2084911f.js";import{F as O,N as Q,_ as B}from"./sidebar-d4d14e1c.js";const H={components:{Footer:O,Navbar:Q,Sidebar:B},setup(){const p=z(),o=a=>{p.push(`/exam/edit/${a}`)},i=c(""),t=c("asc"),F=(a,d)=>{if(!i.value)return 0;const v=a[i.value],g=d[i.value];return i.value==="createdAt"?t.value==="asc"?new Date(v)-new Date(g):new Date(g)-new Date(v):t.value==="asc"?v-g:g-v},E=a=>{i.value===a?t.value=t.value==="asc"?"desc":"asc":(i.value=a,t.value="asc")},_=c([{id:1,courseName:"除了資料統一，規則統一，還要有應用程式市集",instructor:"王大明",category:"醫療資訊系統",averageScore:88,participantsCount:180,createdAt:"2024-01-15"},{id:2,courseName:"統一台灣電子病歷的策略思考",instructor:"李小華",category:"電子病歷",averageScore:85,participantsCount:165,createdAt:"2024-01-16"},{id:3,courseName:"開發FHIR工具，FHIR資料中臺實現互通",instructor:"張醫師",category:"醫療標準規範",averageScore:92,participantsCount:150,createdAt:"2024-01-17"},{id:4,courseName:"臺灣醫中電子病歷資料統一的架構",instructor:"陳工程師",category:"醫療資料交換",averageScore:87,participantsCount:142,createdAt:"2024-01-18"},{id:5,courseName:"FHIR 統一資料，但是沒有統一規則",instructor:"林教授",category:"醫療標準規範",averageScore:90,participantsCount:138,createdAt:"2024-01-19"}]),y=c(["全部","醫療保健","護理照護","急救訓練","長照服務","心理健康","營養學","復健醫學","中醫保健","運動醫學"]),m=c("全部"),r=c(1),u=c(10),D=C(()=>Math.ceil(A.value.length/u.value)),f=c(""),A=C(()=>{let a=_.value.filter(d=>{const v=d.courseName.toLowerCase().includes(f.value.toLowerCase())||d.instructor.toLowerCase().includes(f.value.toLowerCase()),g=m.value==="全部"||d.category===m.value;return v&&g});return i.value&&a.sort(F),a}),V=C(()=>{const a=(r.value-1)*u.value,d=a+u.value;return A.value.slice(a,d)});return{examData:_,currentPageExams:V,searchQuery:f,selectedCategory:m,categories:y,currentPage:r,totalPages:D,editExam:a=>{p.push(`/exam/edit/${a}`)},viewResult:a=>{p.push(`/exam/result/${a}`)},goToPage:a=>{r.value=a},goToExamEdit:o,toggleSort:E,sortField:i,sortOrder:t}}},I={class:"main-wrapper"},j={class:"page-wrapper"},U={class:"page-content"},q={class:"row"},G={class:"col-md-12 grid-margin stretch-card"},J={class:"card"},K={class:"card-body"},W={class:"row mb-3"},X={class:"col-md-6"},Y={class:"col-md-6"},Z=["value"],$={class:"table-responsive"},ee={class:"table table-hover"},te={key:0,class:"material-icons align-middle",style:{"font-size":"16px"}},oe={key:0,class:"material-icons align-middle",style:{"font-size":"16px"}},re={key:0,class:"material-icons align-middle",style:{"font-size":"16px"}},ae=["onClick"],se=["onClick"],ne={key:0,class:"d-flex justify-content-center mt-4"},le={class:"pagination"},ie=["onClick"];function ce(p,o,i,t,F,E){const _=b("Sidebar"),y=b("Navbar"),m=b("Footer");return s(),n("div",I,[k(_),e("div",j,[k(y),e("div",U,[e("div",q,[e("div",G,[e("div",J,[e("div",K,[o[14]||(o[14]=e("h6",{class:"card-title"},"課程測驗列表",-1)),e("div",W,[e("div",X,[T(e("input",{type:"text",class:"form-control mb-2","onUpdate:modelValue":o[0]||(o[0]=r=>t.searchQuery=r),placeholder:"搜尋課程名稱或講師..."},null,512),[[L,t.searchQuery]])]),e("div",Y,[T(e("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=r=>t.selectedCategory=r)},[(s(!0),n(h,null,S(t.categories,r=>(s(),n("option",{key:r,value:r},l(r),9,Z))),128))],512),[[M,t.selectedCategory]])])]),e("div",$,[e("table",ee,[e("thead",null,[e("tr",null,[o[10]||(o[10]=e("th",null,"課程名稱",-1)),o[11]||(o[11]=e("th",null,"課程講師",-1)),o[12]||(o[12]=e("th",null,"分類",-1)),e("th",{onClick:o[2]||(o[2]=r=>t.toggleSort("averageScore")),style:{cursor:"pointer"}},[o[7]||(o[7]=P(" 平均分數 ")),t.sortField==="averageScore"?(s(),n("i",te,l(t.sortOrder==="asc"?"arrow_upward":"arrow_downward"),1)):w("",!0)]),e("th",{onClick:o[3]||(o[3]=r=>t.toggleSort("participantsCount")),style:{cursor:"pointer"}},[o[8]||(o[8]=P(" 參加測驗人數 ")),t.sortField==="participantsCount"?(s(),n("i",oe,l(t.sortOrder==="asc"?"arrow_upward":"arrow_downward"),1)):w("",!0)]),e("th",{onClick:o[4]||(o[4]=r=>t.toggleSort("createdAt")),style:{cursor:"pointer"}},[o[9]||(o[9]=P(" 創建時間 ")),t.sortField==="createdAt"?(s(),n("i",re,l(t.sortOrder==="asc"?"arrow_upward":"arrow_downward"),1)):w("",!0)]),o[13]||(o[13]=e("th",null,"操作",-1))])]),e("tbody",null,[(s(!0),n(h,null,S(t.currentPageExams,r=>(s(),n("tr",{key:r.id},[e("td",null,l(r.courseName),1),e("td",null,l(r.instructor),1),e("td",null,l(r.category),1),e("td",null,l(r.averageScore),1),e("td",null,l(r.participantsCount),1),e("td",null,l(r.createdAt),1),e("td",null,[e("button",{class:"btn btn-primary btn-sm me-2",onClick:u=>t.goToExamEdit(r.id)}," 編輯題目 ",8,ae),e("button",{class:"btn btn-info btn-sm",onClick:u=>t.viewResult(r.id)}," 檢視結果 ",8,se)])]))),128))])])]),t.totalPages>1?(s(),n("div",ne,[e("nav",null,[e("ul",le,[e("li",{class:N(["page-item",{disabled:t.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:o[5]||(o[5]=x(r=>t.goToPage(t.currentPage-1),["prevent"]))}," 上一頁 ")],2),(s(!0),n(h,null,S(t.totalPages,r=>(s(),n("li",{key:r,class:N(["page-item",{active:t.currentPage===r}])},[e("a",{class:"page-link",href:"#",onClick:x(u=>t.goToPage(r),["prevent"])},l(r),9,ie)],2))),128)),e("li",{class:N(["page-item",{disabled:t.currentPage===t.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:o[6]||(o[6]=x(r=>t.goToPage(t.currentPage+1),["prevent"]))}," 下一頁 ")],2)])])])):w("",!0)])])])])]),k(m)])])}const pe=R(H,[["render",ce]]);export{pe as default};
