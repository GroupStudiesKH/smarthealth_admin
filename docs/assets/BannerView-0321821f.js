import{_ as x,p as C,r as _,q as N,i as F,j as u,o,c as n,b as e,k as b,y as S,F as l,f as p,n as V,a as M,l as f,t as h}from"./index-925fa25c.js";import{F as D,N as T,_ as L,a as w}from"./sidebar-3b877dbe.js";const E={components:{Footer:D,Navbar:T,Sidebar:L},setup(){C();const d=_(""),t=_(!1),v=_([]),a=_(!1),g=N([{key:"id",label:"編號"},{key:"title",label:"主要標題"},{key:"status",label:"狀態"},{key:"img_url",label:"圖片"},{key:"actions",label:"操作"}]),m=async()=>{try{a.value=!0;const s=await w.listBanners();v.value=s,a.value=!1}catch(s){console.error("獲取 Banner 列表時發生錯誤:",s)}},y=async s=>{try{confirm("確定要刪除此 Banner 嗎？")&&(a.value=!0,await w.deleteBanner(s),await m(),a.value=!1,c("Banner 已成功刪除"))}catch{i("刪除 Banner 時發生錯誤")}},i=s=>{d.value=s,t.value=!0},c=s=>{d.value=s,t.value=!0},k=()=>{t.value=!1};return F(()=>{m()}),{tableData:v,tableColumns:g,deleteBanner:y,showErrorModal:i,showSuccessModal:c,closeModal:k,modalMessage:d,showModal:t,loading:a}}},H={class:"main-wrapper"},I={class:"page-wrapper"},j={class:"page-content"},q={class:"row mb-3"},z={class:"col-12 text-end"},R={class:"row"},A={class:"col-12 stretch-card"},G={class:"card"},J={class:"card-body"},K={class:"table-responsive"},O={class:"table"},P=["src"],Q=["href"],U=["onClick"],W={class:"modal-dialog"},X={class:"modal-content"},Y={class:"modal-header"},Z=["innerHTML"],$={class:"modal-footer"},ee={key:0,class:"modal-backdrop"},se={key:1,class:"loading-overlay"};function te(d,t,v,a,g,m){const y=u("Sidebar"),i=u("Navbar"),c=u("router-link"),k=u("Footer");return o(),n(l,null,[e("div",H,[b(y),e("div",I,[b(i),e("div",j,[e("div",q,[e("div",z,[b(c,{to:"/layout/banner/add",class:"btn btn-primary"},{default:S(()=>t[2]||(t[2]=[f("新增Banner")])),_:1})])]),e("div",R,[e("div",A,[e("div",G,[e("div",J,[t[5]||(t[5]=e("h6",{class:"card-title"},"Banner列表",-1)),e("div",K,[e("table",O,[e("thead",null,[e("tr",null,[(o(!0),n(l,null,p(a.tableColumns,s=>(o(),n("th",{key:s.key},h(s.label),1))),128))])]),e("tbody",null,[(o(!0),n(l,null,p(a.tableData,(s,B)=>(o(),n("tr",{key:B},[(o(!0),n(l,null,p(a.tableColumns,r=>(o(),n("td",{key:r.key},[r.key==="img_url"?(o(),n("img",{key:0,src:s.img_url,alt:"Banner Image",class:"img-fluid rounded-0",style:{"max-width":"100px"}},null,8,P)):r.key==="actions"?(o(),n(l,{key:1},[e("a",{href:`/layout/banner/edit/${s.id}`,class:"btn btn-link p-0 me-2"},t[3]||(t[3]=[e("i",{class:"material-icons"},"edit",-1)]),8,Q),e("button",{onClick:ae=>a.deleteBanner(s.id),class:"btn btn-link p-0"},t[4]||(t[4]=[e("i",{class:"material-icons"},"delete",-1)]),8,U)],64)):r.key==="status"?(o(),n(l,{key:2},[f(h(s.status==="active"?"啟用":"未啟用"),1)],64)):(o(),n(l,{key:3},[f(h(s[r.key]),1)],64))]))),128))]))),128))])])])])])])])]),b(k)])]),e("div",{class:V(["modal",{"d-block":a.showModal}]),tabindex:"-1"},[e("div",W,[e("div",X,[e("div",Y,[t[6]||(t[6]=e("h5",{class:"modal-title"},"提示",-1)),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...s)=>a.closeModal&&a.closeModal(...s))})]),e("div",{class:"modal-body",innerHTML:a.modalMessage},null,8,Z),e("div",$,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...s)=>a.closeModal&&a.closeModal(...s))}," 關閉 ")])])])],2),a.showModal?(o(),n("div",ee)):M("",!0),a.loading?(o(),n("div",se,t[7]||(t[7]=[e("div",{class:"loading-spinner"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"載入中...")]),e("div",{class:"mt-2"},"載入中...")],-1)]))):M("",!0)],64)}const le=x(E,[["render",te],["__scopeId","data-v-f11443e2"]]);export{le as default};
