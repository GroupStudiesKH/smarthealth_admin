import{_ as k,o as a,c as i,b as s,m as h,i as $,r as u,j as M,t as p,n,a as o}from"./index-e36c3218.js";import{a as _}from"./api-service-a37f4a4e.js";const S={},x={class:"footer d-flex flex-row align-items-center justify-content-between px-4 py-3 border-top small"};function N(m,l){return a(),i("footer",x,l[0]||(l[0]=[s("p",{class:"text-secondary mb-1 mb-md-0"},[h(" Copyright © 2025 "),s("a",{href:"#",target:"_blank"},"工業技術研究院"),h(". ")],-1)]))}const Ss=k(S,[["render",N]]),D={setup(){const m=$(),l=u({name:"Admin User",email:"user@user.com"}),e=u([]),t=u([]),r=u(0),d=u(0),v=async()=>{try{const c=await _.adminMe();c?(sessionStorage.setItem("userData",JSON.stringify(c)),l.value=c):console.error("Invalid response format:",c)}catch(c){console.error("Error fetching admin data:",c),m.push("/login"),localStorage.removeItem("access_token")}},f=async()=>{try{await _.adminLogout(),l.value=null,localStorage.removeItem("access_token"),sessionStorage.removeItem("userData"),m.push("/login")}catch(c){console.error("Logout error:",c)}},y=()=>{const c=document.body,g=document.querySelectorAll(".sidebar-toggler");g.length&&(g.forEach(b=>{b.addEventListener("click",function(w){w.preventDefault(),document.querySelector(".sidebar .sidebar-toggler").classList.toggle("active"),window.matchMedia("(min-width: 992px)").matches?c.classList.toggle("sidebar-folded"):window.matchMedia("(max-width: 991px)").matches&&c.classList.toggle("sidebar-open")})}),window.addEventListener("resize",function(b){c.classList.remove("sidebar-folded","sidebar-open"),document.querySelector(".sidebar .sidebar-toggler").classList.remove("active")},!0))};return M(()=>{v(),y()}),{userData:l,logout:f,notifications:e,messages:t,notificationCount:r,messageCount:d}}},L={class:"navbar"},q={class:"navbar-content"},I={class:"navbar-nav"},W={class:"nav-item dropdown"},C={class:"nav-link dropdown-toggle",href:"#",id:"profileDropdown",role:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},E={class:"dropdown-menu p-0","aria-labelledby":"profileDropdown"},z={class:"d-flex flex-column align-items-center border-bottom px-5 py-3"},A={class:"text-center"},B={class:"fs-16px fw-bolder"},F={class:"fs-12px text-secondary"},V={class:"list-unstyled p-1"},j={class:"dropdown-item py-2"};function J(m,l,e,t,r,d){return a(),i("nav",L,[s("div",q,[l[3]||(l[3]=s("div",{class:"logo-mini-wrapper"},[s("h4",{class:"text-primary"},"SmartHealth")],-1)),s("ul",I,[s("li",W,[s("a",C,p(t.userData.name),1),s("div",E,[s("div",z,[s("div",A,[s("p",B,p(t.userData.name),1),s("p",F,p(t.userData.email),1)])]),s("ul",V,[l[2]||(l[2]=s("li",{class:"dropdown-item py-2"},[s("a",{href:"/user/edit",class:"text-body ms-0"},[s("i",{class:"me-2 icon-md material-icons"},"edit"),s("span",null,"編輯資料")])],-1)),s("li",j,[s("div",{role:"button",onClick:l[0]||(l[0]=v=>t.logout()),class:"text-body ms-0"},l[1]||(l[1]=[s("i",{class:"me-2 icon-md material-icons"},"logout",-1),s("span",null,"登出",-1)]))])])])])]),l[4]||(l[4]=s("a",{href:"#",class:"sidebar-toggler"},[s("i",{class:"material-icons",style:{"font-size":"24px"}},"menu")],-1))])])}const xs=k(D,[["render",J]]),O="/assets/images/logo.png",T={class:"sidebar"},H={class:"sidebar-body"},P={class:"nav",id:"sidebarNav"},Q={class:"collapse","data-bs-parent":"#sidebarNav",id:"courseManagement"},R={class:"nav sub-menu"},U={key:0,class:"nav-item"},G={key:1,class:"nav-item"},K={key:2,class:"nav-item"},X={key:3,class:"nav-item"},Y={class:"collapse","data-bs-parent":"#sidebarNav",id:"memberManagement"},Z={class:"nav sub-menu"},ss={key:0,class:"nav-item"},es={class:"collapse","data-bs-parent":"#sidebarNav",id:"statisticsManagement"},ts={class:"nav sub-menu"},as={key:0,class:"nav-item"},is={class:"collapse","data-bs-parent":"#sidebarNav",id:"examManagement"},ns={class:"nav sub-menu"},os={key:0,class:"nav-item"},rs={class:"collapse","data-bs-parent":"#sidebarNav",id:"siteSettings"},ls={class:"nav sub-menu"},cs={key:0,class:"nav-item"},ds={key:1,class:"nav-item"},ms={class:"collapse","data-bs-parent":"#sidebarNav",id:"layoutSettings"},us={class:"nav sub-menu"},ps={key:0,class:"nav-item"},vs={key:1,class:"nav-item"},gs={key:2,class:"nav-item"},bs={key:3,class:"nav-item"},hs={key:4,class:"nav-item"},_s={key:5,class:"nav-item"},ks={class:"collapse","data-bs-parent":"#sidebarNav",id:"permissionManagement"},fs={class:"nav sub-menu"},ys={key:0,class:"nav-item"},ws={key:1,class:"nav-item"},Ns={__name:"sidebar",setup(m,{expose:l}){const e=(t,r)=>{const d=JSON.parse(localStorage.getItem("userData")||sessionStorage.getItem("userData")||"{}");return d.permissions&&d.permissions[t]&&d.permissions[t].includes(r)};return l({hasPermission:e}),(t,r)=>(a(),i("nav",T,[r[7]||(r[7]=s("div",{class:"sidebar-header"},[s("a",{href:"/",class:"sidebar-brand"},[s("img",{src:O,alt:"logo",width:"150px;"})]),s("div",{class:"sidebar-toggler"},[s("span"),s("span"),s("span")])],-1)),s("div",H,[s("ul",P,[e("course-management","list")?(a(),i("li",{key:0,class:n(["nav-item",{active:t.$route.path.startsWith("/course")}])},[r[0]||(r[0]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#courseManagement",role:"button","aria-expanded":"false","aria-controls":"courseManagement"},[s("i",{class:"link-icon material-icons"},"school"),s("span",{class:"link-title"},"課程管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",Q,[s("ul",R,[e("course-list","list")?(a(),i("li",U,[s("a",{href:"/course",class:n(["nav-link",{active:t.$route.path==="/course/list"}])},"課程列表",2)])):o("",!0),e("course-category","list")?(a(),i("li",G,[s("a",{href:"/course/category",class:n(["nav-link",{active:t.$route.path==="/course/category"}])},"分類管理",2)])):o("",!0),e("course-tag","list")?(a(),i("li",K,[s("a",{href:"/course/tag",class:n(["nav-link",{active:t.$route.path==="/course/tag"}])},"標籤管理",2)])):o("",!0),e("course-instructor","list")?(a(),i("li",X,[s("a",{href:"/course/instructor",class:n(["nav-link",{active:t.$route.path==="/course/instructor"}])},"講師列表",2)])):o("",!0)])])],2)):o("",!0),e("member-management","list")?(a(),i("li",{key:1,class:n(["nav-item",{active:t.$route.path.startsWith("/member")}])},[r[1]||(r[1]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#memberManagement",role:"button","aria-expanded":"false","aria-controls":"memberManagement"},[s("i",{class:"link-icon material-icons"},"people"),s("span",{class:"link-title"},"會員管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",Y,[s("ul",Z,[e("member-list","list")?(a(),i("li",ss,[s("a",{href:"/member",class:n(["nav-link",{active:t.$route.path==="/member"}])},"會員列表",2)])):o("",!0)])])],2)):o("",!0),e("course-statistics","list")?(a(),i("li",{key:2,class:n(["nav-item",{active:t.$route.path.startsWith("/statistics")}])},[r[2]||(r[2]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#statisticsManagement",role:"button","aria-expanded":"false","aria-controls":"statisticsManagement"},[s("i",{class:"link-icon material-icons"},"analytics"),s("span",{class:"link-title"},"課程統計"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",es,[s("ul",ts,[e("course-progress","list")?(a(),i("li",as,[s("a",{href:"/statistics/progress",class:n(["nav-link",{active:t.$route.path==="/statistics/progress"}])},"學習進度統計",2)])):o("",!0)])])],2)):o("",!0),e("exam-statistics","list")?(a(),i("li",{key:3,class:n(["nav-item",{active:t.$route.path.startsWith("/exam")}])},[r[3]||(r[3]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#examManagement",role:"button","aria-expanded":"false","aria-controls":"examManagement"},[s("i",{class:"link-icon material-icons"},"quiz"),s("span",{class:"link-title"},"測驗管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",is,[s("ul",ns,[e("exam-statistics","list")?(a(),i("li",os,[s("a",{href:"/exam/statistics",class:n(["nav-link",{active:t.$route.path==="/exam/statistics"}])},"課程測驗列表",2)])):o("",!0)])])],2)):o("",!0),e("site-brand","list")||e("site-social","list")?(a(),i("li",{key:4,class:n(["nav-item",{active:t.$route.path.startsWith("/settings")}])},[r[4]||(r[4]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#siteSettings",role:"button","aria-expanded":"false","aria-controls":"siteSettings"},[s("i",{class:"link-icon material-icons"},"settings"),s("span",{class:"link-title"},"網站基本設定"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",rs,[s("ul",ls,[e("site-brand","list")?(a(),i("li",cs,[s("a",{href:"/settings/brand",class:n(["nav-link",{active:t.$route.path==="/settings/brand"}])},"品牌設定",2)])):o("",!0),e("site-social","list")?(a(),i("li",ds,[s("a",{href:"/settings/social",class:n(["nav-link",{active:t.$route.path==="/settings/social"}])},"社群設定",2)])):o("",!0)])])],2)):o("",!0),e("layout-banner-management","list")||e("content-faq","edit")||e("content-about","edit")||e("content-terms","edit")||e("content-privacy","edit")||e("content-security","edit")?(a(),i("li",{key:5,class:n(["nav-item",{active:t.$route.path.startsWith("/layout")}])},[r[5]||(r[5]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#layoutSettings",role:"button","aria-expanded":"false","aria-controls":"layoutSettings"},[s("i",{class:"link-icon material-icons"},"dashboard"),s("span",{class:"link-title"},"介紹頁面管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",ms,[s("ul",us,[e("layout-banner-management","list")?(a(),i("li",ps,[s("a",{href:"/layout/banner",class:n(["nav-link",{active:t.$route.path==="/layout/banner"}])},"首頁Banner管理",2)])):o("",!0),e("content-faq","edit")?(a(),i("li",vs,[s("a",{href:"/content/faq",class:n(["nav-link",{active:t.$route.path==="/content/faq"}])},"FAQ",2)])):o("",!0),e("content-about","edit")?(a(),i("li",gs,[s("a",{href:"/content/about",class:n(["nav-link",{active:t.$route.path==="/content/about"}])},"計劃緣起",2)])):o("",!0),e("content-terms","edit")?(a(),i("li",bs,[s("a",{href:"/content/terms",class:n(["nav-link",{active:t.$route.path==="/content/terms"}])},"使用者條款",2)])):o("",!0),e("content-privacy","edit")?(a(),i("li",hs,[s("a",{href:"/content/privacy",class:n(["nav-link",{active:t.$route.path==="/content/privacy"}])},"隱私權政策",2)])):o("",!0),e("content-security","edit")?(a(),i("li",_s,[s("a",{href:"/content/security",class:n(["nav-link",{active:t.$route.path==="/content/security"}])},"資安政策",2)])):o("",!0)])])],2)):o("",!0),e("permissions_group","list")?(a(),i("li",{key:6,class:n(["nav-item",{active:t.$route.path.startsWith("/permission")}])},[r[6]||(r[6]=s("a",{class:"nav-link","data-bs-toggle":"collapse",href:"#permissionManagement",role:"button","aria-expanded":"false","aria-controls":"permissionManagement"},[s("i",{class:"link-icon material-icons"},"security"),s("span",{class:"link-title"},"權限管理"),s("i",{class:"link-arrow material-icons"},"keyboard_arrow_down")],-1)),s("div",ks,[s("ul",fs,[e("permissions_group","list")?(a(),i("li",ys,[s("a",{href:"/permission",class:n(["nav-link",{active:t.$route.path==="/permission"}])},"角色",2)])):o("",!0),e("permissions_group","list")?(a(),i("li",ws,[s("a",{href:"/admins",class:n(["nav-link",{active:t.$route.path==="/admins"}])},"管理員列表",2)])):o("",!0)])])],2)):o("",!0)])])]))}};export{Ss as F,xs as N,Ns as _};
